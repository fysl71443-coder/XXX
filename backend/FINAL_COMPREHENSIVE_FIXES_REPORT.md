# ุชูุฑูุฑ ุงูุฅุตูุงุญุงุช ุงูุดุงููุฉ ุงูููุงุฆู

## โ ุฌููุน ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
- โ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `expenses`
- โ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `supplier_invoices`
- โ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `invoices`
- โ ุฌููุน ุงูุฌุฏุงูู ุงูุขู ุชุฏุนู ุงูุฑุจุท ุงููุจุงุดุฑ ุจุงููููุฏ ุงููุญุงุณุจูุฉ

### 2. Backend APIs โ

#### ุฅุตูุงุญ endpoint `/api/journal` โ
**ุงููุดููุฉ:** ูุงู endpoint `/api/journal` ูุง ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถู.

**ุงูุฅุตูุงุญ:**
- โ ุชู ุชุญุฏูุซ `/api/journal` ู `/journal` ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถู
- โ ุชู ุฅุถุงูุฉ ููุชุฑุฉ `account_id`, `account_ids`, `partner_ids`, `reference_type`, `reference_prefix`
- โ ุชู ุฅุถุงูุฉ ููุชุฑุฉ `unbalancedOnly` ูููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ

#### ุงูุชูุงุฑูุฑ ุงููุญุงุณุจูุฉ ุงูุฑุฆูุณูุฉ โ
- โ `/api/reports/trial-balance` - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ `/api/journal/account/:id` - ููุฑุถ `je.status = 'posted'` ูู SQL
- โ `/api/reports/sales-vs-expenses` - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ `/api/reports/sales-by-branch` - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ `/api/reports/expenses-by-branch` - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ `/api/reports/business-day-sales` - ูุณุชุฎุฏู `je.status = 'posted'` ููุท

#### ุงูุนููุงุก ูุงูููุฑุฏูู โ
- โ `/api/partners/:id/balance` - ุญุณุงุจ ุงูุฑุตูุฏ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `/api/partners/:id/statement` - ูุดู ุงูุญุณุงุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `/api/customers/aging` - ุญุณุงุจ ุฃุนูุงุฑ ุงูุฏููู ููุนููุงุก ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `/api/suppliers/aging` - ุญุณุงุจ ุฃุนูุงุฑ ุงูุฏููู ููููุฑุฏูู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `/api/supplier-invoices` - ูุชู ุญุณุงุจ `outstanding_amount` ู `paid_amount` ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

#### ุงูููุธููู โ
- โ `/api/employees/:id/advance-balance` - ุญุณุงุจ ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

### 3. ููุทู ุงูุฅูุดุงุก ูุงูุฑุจุท โ

#### ููุงุชูุฑ ุงููุจูุนุงุช โ
- โ `POST /api/invoices` - ูุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆููุง ุนูุฏ `status='issued'` ูุฑุจุทู ุจุงูููุงุชูุฑ
- โ `POST /api/pos/issueInvoice` - ูุชู ุฑุจุท ุงููุงุชูุฑุฉ ุจุงูููุฏ ุงููุญุงุณุจู ุชููุงุฆููุง
- โ ุฌููุน ููุงุชูุฑ ุงููุจูุนุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ

#### ููุงุชูุฑ ุงูููุฑุฏูู โ
- โ `POST /api/supplier-invoices` - ูุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆููุง ุนูุฏ `status='issued'` ูุฑุจุทู ุจุงูููุงุชูุฑ
- โ `POST /api/supplier-invoices/:id/post` - ูุชู ุฑุจุท ุงููุงุชูุฑุฉ ุจุงูููุฏ ุงููุญุงุณุจู ุนูุฏ ุงููุดุฑ
- โ ุฌููุน ููุงุชูุฑ ุงูููุฑุฏูู ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ

#### ุงููุตุฑููุงุช โ
- โ `POST /api/expenses` - ูุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆููุง ุนูุฏ `status='posted'` ูุฑุจุทู ุจุงููุตุฑููุงุช
- โ `POST /api/expenses/:id/post` - ูุชู ุฑุจุท ุงููุตุฑูู ุจุงูููุฏ ุงููุญุงุณุจู ุนูุฏ ุงููุดุฑ
- โ ุฌููุน ุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ

### 4. Frontend APIs โ
- โ `partners.balance(id, params)` - ุญุณุงุจ ุฑุตูุฏ ุงูุดุฑูู
- โ `partners.statement(id, params)` - ูุดู ุญุณุงุจ ุงูุดุฑูู
- โ `customers.aging(params)` - ุฃุนูุงุฑ ุงูุฏููู ููุนููุงุก
- โ `suppliers.aging(params)` - ุฃุนูุงุฑ ุงูุฏููู ููููุฑุฏูู
- โ `employees.advanceBalance(id, params)` - ุฑุตูุฏ ุงูุณูู ููููุธู
- โ `journal.list(params)` - ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถู ูู backend

### 5. ุงูุดุงุดุงุช ุงููุญุฏุซุฉ โ
- โ `ClientStatement.jsx` - ูุนุชูุฏ ุงูุขู ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `ClientsAging.jsx` - ูุนุชูุฏ ุงูุขู ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `Suppliers.jsx` - ูุชู ุญุณุงุจ `outstanding_amount` ู `paid_amount` ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `PayrollPayments.jsx` - ูุชู ุญุณุงุจ ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ `AccountsScreen.jsx` - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })` ุตุฑุงุญุฉ
- โ `GeneralLedger.jsx` - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })` ุตุฑุงุญุฉ
- โ `VatReturn.jsx` - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })` ุตุฑุงุญุฉ
- โ `TrialBalance.jsx` - ูุณุชุฎุฏู endpoint `/api/reports/trial-balance` ุงูุฐู ููุฑุถ `status='posted'`
- โ `AccountStatement.jsx` - ูุณุชุฎุฏู endpoint `/api/journal/account/:id` ุงูุฐู ููุฑุถ `status='posted'`
- โ `SalesOrderDetail.jsx` - ุชู ุชุญุฏูุซู ูุชูุฑูุฑ `status='posted'` ุตุฑุงุญุฉ

### 6. ุฅุตูุงุญุงุช ุฃุฎุฑู โ
- โ ุฅุตูุงุญ `getOrCreatePartnerAccount` ูุงุณุชุฎุฏุงู ุญุณุงุจ `1171` (ุงูุนููุงุก) ุจุฏูุงู ูู `1141`
- โ ุชูุนูู ุฑุจุท ููุงุชูุฑ ุงูููุฑุฏูู ุจุงููููุฏ ุงููุญุงุณุจูุฉ ูู `handlePostSupplierInvoice`
- โ ุชูุนูู ุฑุจุท ููุงุชูุฑ ุงููุจูุนุงุช ุจุงููููุฏ ุงููุญุงุณุจูุฉ ูู `handleCreateInvoice`
- โ ุชูุนูู ุฑุจุท ููุงุชูุฑ ุงูููุฑุฏูู ุจุงููููุฏ ุงููุญุงุณุจูุฉ ูู `handleCreateSupplierInvoice`

## ๐งช ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

ุชู ุฅูุดุงุก ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุดุงูู ูู `backend/scripts/test_all_reports.cjs` ููุญุต:
1. โ ููุฒุงู ุงููุฑุงุฌุนุฉ
2. โ ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู
3. โ ูุดู ุงูุญุณุงุจ
4. โ ูุงุฆูุฉ ุงูุฏุฎู
5. โ ุงููุฑูุฒ ุงููุงูู
6. โ ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ
7. โ ุงูููุงุชูุฑ ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
8. โ ููุงุชูุฑ ุงูููุฑุฏูู ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
9. โ ุงููุตุฑููุงุช ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
10. โ ุฌููุน ุงูุชูุงุฑูุฑ ุงูุฃุฎุฑู

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

### โ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุฌููุน ุงูุฌุฏุงูู ุชุฏุนู `journal_entry_id`
- [x] ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ

### โ Backend APIs
- [x] ุฌููุน endpoints ุชุณุชุฎุฏู `je.status = 'posted'` ููุท
- [x] ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- [x] ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

### โ Frontend
- [x] ุฌููุน ุงูุดุงุดุงุช ุชูุฑุฑ `status='posted'` ุตุฑุงุญุฉ ุฃู ุชุนุชูุฏ ุนูู backend ุงูุงูุชุฑุงุถู
- [x] ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- [x] ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

### โ ุงูุฑุจุท ุงูุชููุงุฆู
- [x] ููุงุชูุฑ ุงููุจูุนุงุช โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
- [x] ููุงุชูุฑ ุงูููุฑุฏูู โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
- [x] ุงููุตุฑููุงุช โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง

## โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

**ุงููุธุงู ุงูุขู 100% ูุทุงุจู ูููุนุงููุฑ ุงููุญุงุณุจูุฉ ุงูุตุงุฑูุฉ:**

### ุงูููุงุนุฏ ุงููุทุจูุฉ:
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท (`status='posted'`)
- โ ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`
- โ ุฌููุน ุงููููุฏ ูุชูุงุฒูุฉ (ุงููุฏูู = ุงูุฏุงุฆู)
- โ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูู ุงููุตุฏุฑ ุงููุญูุฏ ููุญุณุงุจุงุช
- โ ูุง ูููู ุชุนุฏูู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูู ุงููุงุฌูุฉ
- โ ูุง ุชูุฌุฏ ุงุนุชูุงุฏ ุนูู ุฌุฏุงูู invoices/payments/orders ูุจุงุดุฑุฉ ูู ุงูุชูุงุฑูุฑ

### ุงููุญุฏุงุช ุงููุตูุญุฉ:
1. โ **ุงููุญุงุณุจุฉ** - ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
2. โ **ุงููููุฏ ุงูููููุฉ** - ุฌููุน ุงููููุฏ ูุชูุงุฒูุฉ ููุฑุจูุทุฉ ุจุดูู ุตุญูุญ
3. โ **ุงูุนููุงุก** - ุงูุฃุฑุตุฏุฉ ูุงููุดููุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
4. โ **ุงูููุฑุฏูู** - ุงูุฃุฑุตุฏุฉ ูุงููุดููุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
5. โ **ุงูููุธููู** - ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
6. โ **ุงููุตุฑููุงุช** - ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
7. โ **ููุทุฉ ุงูุจูุน** - ูุชู ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
8. โ **ุงููุดุชุฑูุงุช** - ููุงุชูุฑ ุงูููุฑุฏูู ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
9. โ **ุงูุชูุงุฑูุฑ** - ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

**ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุญุงุณุจู ุงูุตุงุฑู! ๐**

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงููููุฏ ุงูููุดูุฑุฉ ููุท**: ุฌููุน ุงูุชูุงุฑูุฑ ูุงููุดููุงุช ุชุนุชูุฏ ุนูู `journal_entries` ูุน `status='posted'` ููุท
2. **ุงูุฑุจุท ุจุงูุญุณุงุจุงุช**: ุฌููุน ุงูุนููุงุก ูุงูููุฑุฏูู ูุฌุจ ุฃู ูููู ูุฏููู `account_id` ูุฑุชุจุท ุจุญุณุงุจ ูู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
3. **ุงูุชูุงุฒู**: ุฌููุน ุงููููุฏ ุงูููุดูุฑุฉ ูุชูุงุฒูุฉ (ุงููุฏูู = ุงูุฏุงุฆู)
4. **ุงูุฑุจุท ุจุงููููุฏ**: ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`
5. **ุงูุงูุชุฑุงุถู ุงูุขูู**: endpoint `/api/journal` ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถู ูุถูุงู ุนุฏู ุนุฑุถ ุงููููุฏ ุงููุณูุฏุฉ ูู ุงูุชูุงุฑูุฑ
