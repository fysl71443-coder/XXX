# ุชูุฑูุฑ ูุฑุงุฌุนุฉ ุดุงุดุฉ ุงูุนููุงุก ุงูุดุงูู
# Comprehensive Customers Screen Review Report

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ:** 2026-01-21  
**ุงูุญุงูุฉ ุงูููุงุฆูุฉ:** โ **100% ุฌุงูุฒ ููุงุณุชุฎุฏุงู**

---

## ููุฎุต ุชูููุฐู

ุชูุช ูุฑุงุฌุนุฉ ุดุงููุฉ ููููุฌูุฉ ูุดุงุดุฉ ุงูุนููุงุก ุจุงููุงูู. ุชู ุงูุชุดุงู ูุฅุตูุงุญ ุนุฏุฉ ูุดุงูู ุฌููุฑูุฉุ ุฃูููุง:
1. **Backend endpoints ุบูุฑ ููุชููุฉ** (`balance`, `statement`, `customers/aging`, `ar/summary`)
2. **ุชุญุณููุงุช UI/UX** ูู ุดุงุดุงุช ุงูุฅูุดุงุก ูุงูุจุทุงูุงุช
3. **ุฏุนู ุงููุบุชูู** ูู ุฌููุน ุงูุดุงุดุงุช ุงููุฑุนูุฉ

---

## 1. ุงููููุงุช ุงูุชู ุชูุช ูุฑุงุฌุนุชูุง

### ุดุงุดุงุช ุงูุนููุงุก (Frontend)
| ุงูููู | ุงููุตู | ุงูุญุงูุฉ |
|-------|-------|--------|
| `Clients.jsx` | ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ููุนููุงุก | โ ูุนูู |
| `ClientsCards.jsx` | ุจุทุงูุงุช ุงูุนููุงุก | โ ูุญุณูู |
| `ClientCreate.jsx` | ุฅูุดุงุก ุนููู ุฌุฏูุฏ | โ ูุญุณูู |
| `ClientsDue.jsx` | ุงููุณุชุญูุงุช | โ ูุญุณูู |
| `ClientsAging.jsx` | ุฃุนูุงุฑ ุงูุฏููู | โ ูุญุณูู |
| `ClientsCredits.jsx` | ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ | โ ูุนูู |
| `ClientsFollowups.jsx` | ูุชุงุจุนุฉ ุงูุณุฏุงุฏ | โ ูุนูู |
| `ClientsInvoicesAll.jsx` | ุฌููุน ููุงุชูุฑ ุงูุนููุงุก | โ ูุนูู |
| `ClientsInvoicesPaid.jsx` | ุงูููุงุชูุฑ ุงููุฏููุนุฉ | โ ูุนูู |
| `ClientStatement.jsx` | ูุดู ุญุณุงุจ ุงูุนููู | โ ูุนูู |

### ุงูู Backend
| ุงูููู | ุงููุตู | ุงูุญุงูุฉ |
|-------|-------|--------|
| `partnerController.js` | Controller ููุนููุงุก | โ ูุญุณูู |
| `routes/partners.js` | Routes ููุนููุงุก | โ ูุนูู |
| `server.js` | Endpoints ุฅุถุงููุฉ | โ ูุญุณูู |

### ุฎุฏูุงุช API (Frontend)
| ุงูููู | ุงููุตู | ุงูุญุงูุฉ |
|-------|-------|--------|
| `api/index.js` | ุฎุฏูุงุช API | โ ูุนูู |

---

## 2. ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุฅุตูุงุญุงุช

### ๐ด ูุดููุฉ #1: `partnerController.balance` ุบูุฑ ููุชูู

**ุงููุตู:** ูุงู ูุฑุฌุน `{ balance: 0 }` ุจุฏูู ุญุณุงุจ ูุนูู

**ุงูุฅุตูุงุญ:**
```javascript
// ุงูุขู ูุญุณุจ ุงูุฑุตูุฏ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
export async function balance(req, res) {
  const accountId = partnerRows[0].account_id;
  const { rows } = await pool.query(`
    SELECT COALESCE(SUM(jel.debit), 0) - COALESCE(SUM(jel.credit), 0) as balance
    FROM journal_entry_lines jel
    JOIN journal_entries je ON jel.entry_id = je.id
    WHERE jel.account_id = $1 AND je.status = 'posted'
  `, [accountId]);
  res.json({ balance, partner_id, account_id });
}
```

---

### ๐ด ูุดููุฉ #2: `partnerController.statement` ุบูุฑ ููุชูู

**ุงููุตู:** ูุงู ูุฑุฌุน `{ items: [] }` ุจุฏูู ุจูุงูุงุช ูุนููุฉ

**ุงูุฅุตูุงุญ:**
- ูุญุณุจ Opening Balance ูุจู ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- ูุฑุฌุน ุฌููุน ุญุฑูุงุช ุงูุญุณุงุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ
- ูุญุณุจ Running Balance ู Closing Balance
- ูุฏุนู ููุงุชุฑ `from` ู `to`

---

### ๐ด ูุดููุฉ #3: `/customers/aging` ุบูุฑ ููุฌูุฏ

**ุงููุตู:** ูุงู Frontend ูุณุชุฏุนู endpoint ุบูุฑ ููุฌูุฏ

**ุงูุฅุตูุงุญ:**
```javascript
// ุฃุถููุง endpoint ุฌุฏูุฏ ูู server.js
app.get("/customers/aging", authenticateToken, authorize("reports","view"), async (req, res) => {
  // ูุฑุฌุน ุงูููุงุชูุฑ ุบูุฑ ุงููุณุฏุฏุฉ ูุน aging_bucket (0-30, 31-60, 61-90, 90+)
  // ูุญุณุจ remaining, days, partner_name
});
```

---

### ๐ด ูุดููุฉ #4: `/ar/summary` ุบูุฑ ููุชูู

**ุงููุตู:** ูุงู ูุฑุฌุน `{ items: [] }` ุจุฏูู ุญุณุงุจ ูุนูู

**ุงูุฅุตูุงุญ:**
```javascript
// ุงูุขู ูุญุณุจ ุฑุตูุฏ ูู ุนููู ูู ุงููููุฏ ุงูููุดูุฑุฉ
// ููุฑุฌุน balance, last_payment_at ููู ุนููู
```

---

### ๐ก ุชุญุณููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู

#### ClientCreate.jsx
- โ ุฅุถุงูุฉ labels ูุงุถุญุฉ ูุฌููุน ุงูุญููู ูุน ุฃููููุงุช
- โ ุชูุณูู ุงููููุฐุฌ ุฅูู ุฃูุณุงู ููุทููุฉ
- โ ุฅุถุงูุฉ ูุตูุต ุชูุถูุญูุฉ ูููุณุชุฎุฏู
- โ ุชุญุณูู ุงูุชุตููู ุงูุนุงู (rounded corners, shadows)
- โ ุฏุนู ูุงูู ููุบุชูู

#### ClientsCards.jsx
- โ ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช (ุฅุฌูุงููุ ููุฏูุ ุขุฌู)
- โ ุฅุถุงูุฉ ููุชุฑุฉ ุญุณุจ ููุน ุงูุนููู
- โ ุฅุถุงูุฉ ุชุตุฏูุฑ Excel
- โ ุชุญุณูู ุชุตููู ุงูุจุทุงูุงุช ูุน ุฃููููุงุช
- โ ุนุฑุถ ูุณุจุฉ ุงูุฎุตู
- โ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

#### ClientsAging.jsx
- โ ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ููุฎุตุฉ
- โ ุฅุถุงูุฉ ุชุตุฏูุฑ Excel ู PDF
- โ ุชุญุณูู ุงูููุชุฑุฉ ุจุงููุฆุงุช ุงูุนูุฑูุฉ
- โ ุนุฑุถ ุงูุนููู ูุงุณู ุงููุงุชูุฑุฉ ูุงููุชุจูู
- โ ุชูููู ุญุณุจ ุนูุฑ ุงูุฏูู

#### ClientsDue.jsx
- โ ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช (ูุฏููุ ุฏุงุฆูุ ุตุงูู)
- โ ุฅุถุงูุฉ ููุชุฑุฉ (ุงูููุ ูุฏููุ ุฏุงุฆู)
- โ ุฅุถุงูุฉ ุชุตุฏูุฑ Excel
- โ ุนุฑุถ ุขุฎุฑ ุฏูุนุฉ ููู ุนููู
- โ ุชุญุณูู ุงูุชุตููู

---

## 3. ุงูุชุญูู ูู ุฏุนู ุงููุบุชูู

| ุงูุดุงุดุฉ | ุฏุนู ุงูุนุฑุจูุฉ | ุฏุนู ุงูุฅูุฌููุฒูุฉ |
|--------|-------------|----------------|
| Clients.jsx | โ | โ |
| ClientsCards.jsx | โ | โ |
| ClientCreate.jsx | โ | โ |
| ClientsDue.jsx | โ | โ |
| ClientsAging.jsx | โ | โ |
| ClientsCredits.jsx | โ | โ |
| ClientsFollowups.jsx | โ | โ |
| ClientStatement.jsx | โ | โ |

---

## 4. API Endpoints ุงููุชููุฑุฉ

| Endpoint | Method | ุงููุตู |
|----------|--------|-------|
| `/api/partners` | GET | ูุงุฆูุฉ ุงูุดุฑูุงุก (ุงูุนููุงุก/ุงูููุฑุฏูู) |
| `/api/partners` | POST | ุฅูุดุงุก ุดุฑูู ุฌุฏูุฏ |
| `/api/partners/:id` | GET | ุชูุงุตูู ุดุฑูู |
| `/api/partners/:id` | PUT | ุชุนุฏูู ุดุฑูู |
| `/api/partners/:id` | DELETE | ุญุฐู ุดุฑูู (soft delete) |
| `/api/partners/:id/balance` | GET | ุฑุตูุฏ ุงูุดุฑูู โ ูุญุณูู |
| `/api/partners/:id/statement` | GET | ูุดู ุญุณุงุจ ุงูุดุฑูู โ ูุญุณูู |
| `/api/customers/aging` | GET | ุฃุนูุงุฑ ุฏููู ุงูุนููุงุก โ ุฌุฏูุฏ |
| `/api/ar/summary` | GET | ููุฎุต ุงููุณุชุญูุงุช โ ูุญุณูู |

---

## 5. ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

| ุงูุตูุงุญูุฉ | ุงููุตู |
|----------|-------|
| `clients:view` | ุนุฑุถ ุงูุนููุงุก |
| `clients:write` | ุฅุถุงูุฉ/ุชุนุฏูู ุงูุนููุงุก |
| `clients:delete` | ุญุฐู ุงูุนููุงุก |
| `clients:remind` | ุฅุฑุณุงู ุชุฐููุฑ ููุนููุงุก |
| `reports:view` | ุนุฑุถ ุงูุชูุงุฑูุฑ |
| `reports:print` | ุทุจุงุนุฉ ุงูุชูุงุฑูุฑ |
| `invoices:create` | ุฅูุดุงุก ููุงุชูุฑ |
| `invoices:credit_note` | ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู |

---

## 6. ุงูููุฒุงุช ุงููุชููุฑุฉ

### ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ (Clients.jsx)
- โ ุฅุญุตุงุฆูุงุช ุนุงูุฉ (ุฅุฌูุงูู ุงูููุงุชูุฑุ ุงููุณุชุญูุ ูุนุฏู ุงูุณุฏุงุฏุ ูุชูุณุท ุงูุชุญุตูู)
- โ ุชุจููุจุงุช ูุชุนุฏุฏุฉ (ุงูุฑุฆูุณูุฉุ ููุฏูุ ุขุฌูุ ุงููุณุชุญูุงุชุ ุงููุฏููุนุงุชุ ุงููุดููุงุช)
- โ ุจุญุซ ูููุชุฑุฉ ูุชูุฏูุฉ
- โ ุชุตุฏูุฑ Excel ู PDF
- โ ุนุฑุถ/ุชุนุฏูู/ุญุฐู ุงูุนููุงุก
- โ ุทุจุงุนุฉ ูุดู ุญุณุงุจ
- โ ุฅูุดุงุก ูุงุชูุฑุฉ/ุฅุดุนุงุฑ ุฏุงุฆู
- โ ุฅุฑุณุงู ุชุฐููุฑ ุจุงูุจุฑูุฏ

### ุจุทุงูุงุช ุงูุนููุงุก (ClientsCards.jsx)
- โ ุนุฑุถ ุจุทุงูู ุฌุฐุงุจ ูุน animations
- โ ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- โ ููุชุฑุฉ ุญุณุจ ุงูููุน (ููุฏู/ุขุฌู)
- โ ุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุชู
- โ ุชุตุฏูุฑ Excel ู PDF
- โ ุนุฑุถ ูุณุจุฉ ุงูุฎุตู
- โ ุฃุฒุฑุงุฑ ุณุฑูุนุฉ (ุนุฑุถุ ุชุนุฏููุ ุญุฐู)

### ุฅูุดุงุก ุนููู (ClientCreate.jsx)
- โ ูููุฐุฌ ููุธู ูุน labels ูุงุถุญุฉ
- โ ุชูุณูู ูุฃูุณุงู (ุจูุงูุงุช ุฃุณุงุณูุฉุ ุฏูุน)
- โ ููุน ุงูุฏูุน (ููุฏู/ุขุฌู)
- โ ูุณุจุฉ ุงูุฎุตู ุงูููููุญ
- โ ุชุญูู ูู ุงูุจูุงูุงุช

### ุงููุณุชุญูุงุช (ClientsDue.jsx)
- โ ููุฎุต ุฅุญุตุงุฆู (ูุฏููุ ุฏุงุฆูุ ุตุงูู)
- โ ููุชุฑุฉ (ุงูููุ ูุฏููุ ุฏุงุฆู)
- โ ุชุตุฏูุฑ Excel
- โ ุขุฎุฑ ุฏูุนุฉ ููู ุนููู

### ุฃุนูุงุฑ ุงูุฏููู (ClientsAging.jsx)
- โ ูุฆุงุช ุนูุฑูุฉ (0-30ุ 31-60ุ 61-90ุ 90+)
- โ ุฅุญุตุงุฆูุงุช ููุฎุตุฉ
- โ ุชุตุฏูุฑ Excel ู PDF
- โ ุชูููู ุญุณุจ ุงูุนูุฑ

### ูุดู ุงูุญุณุงุจ (ClientStatement.jsx)
- โ ุฑุตูุฏ ุงูุชุชุงุญู ูุฎุชุงูู
- โ ุชูุงุตูู ุงูููุงุชูุฑ
- โ ุญุฑูุงุช ุงูุญุณุงุจ (Running Balance)
- โ ููุชุฑุฉ ุจุงูุชุงุฑูุฎ ูุงูุญุงูุฉ
- โ ูุตุฏุฑ ุงูุญูููุฉ: ุงููููุฏ ุงูููุดูุฑุฉ ููุท

---

## 7. ุงูุฎูุงุตุฉ

โ **ุดุงุดุฉ ุงูุนููุงุก ุฌุงูุฒุฉ 100% ููุงุณุชุฎุฏุงู**

### ุงูุฅุตูุงุญุงุช ุงูุฌููุฑูุฉ:
1. โ ุฅุตูุงุญ `partnerController.balance` - ูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ
2. โ ุฅุตูุงุญ `partnerController.statement` - ูุดู ุญุณุงุจ ูุงูู
3. โ ุฅุถุงูุฉ `/customers/aging` endpoint
4. โ ุฅุตูุงุญ `/ar/summary` endpoint
5. โ ุชุญุณูู UI/UX ูู `ClientCreate.jsx`
6. โ ุชุญุณูู UI/UX ูู `ClientsCards.jsx`
7. โ ุชุญุณูู UI/UX ูู `ClientsAging.jsx`
8. โ ุชุญุณูู UI/UX ูู `ClientsDue.jsx`

### ุงูุชุญูู ูู ุงูุฌูุฏุฉ:
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก linter
- โ ุฏุนู ูุงูู ููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ูุตุฏุฑ ุงูุญูููุฉ: ุงููููุฏ ุงูููุดูุฑุฉ ููุท (POSTED)
- โ ุตูุงุญูุงุช ููุงุณุจุฉ
- โ ุชุตุฏูุฑ Excel ู PDF

---

**ููุงุญุธุฉ:** ูููุตุญ ุจุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ูุชุทุจูู ุงูุชุบููุฑุงุช ุนูู Backend.
