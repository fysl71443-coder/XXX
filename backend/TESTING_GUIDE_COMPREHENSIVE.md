# ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู - ุฌููุน ุงูุดุงุดุงุช ูุงูุชูุงุฑูุฑ

## ๐ฏ ุงููุฏู
ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุดุงุดุงุช ูุงูุชูุงุฑูุฑ ุชุณุชูุฏ ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท (`status='posted'`).

## ๐ ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑุงุช

### 1. ุงุฎุชุจุงุฑ Backend APIs

#### 1.1 ุงุฎุชุจุงุฑ `/api/journal`
```bash
# ูุฌุจ ุฃู ูุนุฑุถ ุงููููุฏ ุงูููุดูุฑุฉ ููุท ุจุดูู ุงูุชุฑุงุถู
curl -X GET "http://localhost:3000/api/journal" \
  -H "Authorization: Bearer YOUR_TOKEN"

# ูุฌุจ ุฃู ูุนุฑุถ ุงููููุฏ ุงููุณูุฏุฉ ููุท ุนูุฏ ุชูุฑูุฑ status=draft ุตุฑุงุญุฉ
curl -X GET "http://localhost:3000/api/journal?status=draft" \
  -H "Authorization: Bearer YOUR_TOKEN"

# ูุฌุจ ุฃู ูููุชุฑ ุญุณุจ account_id
curl -X GET "http://localhost:3000/api/journal?account_id=123" \
  -H "Authorization: Bearer YOUR_TOKEN"

# ูุฌุจ ุฃู ูููุชุฑ ุญุณุจ partner_ids
curl -X GET "http://localhost:3000/api/journal?partner_ids=1,2,3" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงููููุฏ ุงููุนุฑูุถุฉ ููุง `status='posted'` (ูุง ูู ูุชู ุชูุฑูุฑ `status='draft'` ุตุฑุงุญุฉ)
- โ ุงูููุงุชุฑ ุชุนูู ุจุดูู ุตุญูุญ

#### 1.2 ุงุฎุชุจุงุฑ `/api/journal/account/:id`
```bash
curl -X GET "http://localhost:3000/api/journal/account/123" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงููููุฏ ุงููุนุฑูุถุฉ ููุง `status='posted'`
- โ ุฌููุน ุงููููุฏ ูุฑุชุจุทุฉ ุจุงูุญุณุงุจ ุงููุญุฏุฏ

#### 1.3 ุงุฎุชุจุงุฑ `/api/reports/trial-balance`
```bash
curl -X GET "http://localhost:3000/api/reports/trial-balance?from=2024-01-01&to=2024-12-31" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฅุฌูุงูู ุงููุฏูู = ุฅุฌูุงูู ุงูุฏุงุฆู (ูุชูุงุฒู)

#### 1.4 ุงุฎุชุจุงุฑ `/api/reports/sales-vs-expenses`
```bash
curl -X GET "http://localhost:3000/api/reports/sales-vs-expenses?from=2024-01-01&to=2024-12-31" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุจูุนุงุช ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงููุตุฑููุงุช ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ูุง ุชูุฌุฏ ุชุญุฐูุฑุงุช ุนู ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ

#### 1.5 ุงุฎุชุจุงุฑ `/api/partners/:id/statement`
```bash
curl -X GET "http://localhost:3000/api/partners/123/statement?from=2024-01-01&to=2024-12-31" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงูุนูุงุตุฑ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุงูุฎุชุงูู ุตุญูุญ

#### 1.6 ุงุฎุชุจุงุฑ `/api/employees/:id/advance-balance`
```bash
curl -X GET "http://localhost:3000/api/employees/123/advance-balance" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฑุตูุฏ ููุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุฑุตูุฏ ุตุญูุญ

### 2. ุงุฎุชุจุงุฑ Frontend - ุงูุดุงุดุงุช

#### 2.1 ุดุงุดุฉ ุงููููุฏ ุงูููููุฉ (`Journal.jsx`)
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุดุงุดุฉ ุงููููุฏ ุงูููููุฉ
2. ุชุฃูุฏ ูู ุฃู ุงูููุชุฑ ุงูุงูุชุฑุงุถู ูู `status='posted'`
3. ุชุญูู ูู ุฃู ุฌููุน ุงููููุฏ ุงููุนุฑูุถุฉ ููุง `status='posted'`
4. ุฌุฑุจ ุชุบููุฑ ุงูููุชุฑ ุฅูู `status='draft'` - ูุฌุจ ุฃู ุชุธูุฑ ุงููููุฏ ุงููุณูุฏุฉ ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููููุฏ ุงูููุดูุฑุฉ ููุท ุชุธูุฑ ุจุดูู ุงูุชุฑุงุถู
- โ ูููู ุนุฑุถ ุงููููุฏ ุงููุณูุฏุฉ ุนูุฏ ุชุบููุฑ ุงูููุชุฑ

#### 2.2 ุดุงุดุฉ ุงููุญุงุณุจุฉ (`AccountsScreen.jsx`)
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุดุงุดุฉ ุงููุญุงุณุจุฉ
2. ุงูุชุญ ููุฒุงู ุงููุฑุงุฌุนุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูุฃุฑุตุฏุฉ ุตุญูุญุฉ
4. ุงูุชุญ ูุงุฆูุฉ ุงูุฏุฎู
5. ุชุฃูุฏ ูู ุฃู ุงูุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
6. ุงูุชุญ ุงููุฑูุฒ ุงููุงูู
7. ุชุฃูุฏ ูู ุฃู ุงููุนุงุฏูุฉ ูุชูุงุฒูุฉ (ุงูุฃุตูู = ุงูุงูุชุฒุงูุงุช + ุญููู ุงูููููุฉ)

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุฃุฑุตุฏุฉ ุตุญูุญุฉ
- โ ุงููุนุงุฏูุงุช ุงููุญุงุณุจูุฉ ูุชูุงุฒูุฉ

#### 2.3 ุดุงุดุฉ ุงูุนููุงุก (`Clients.jsx`)
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุดุงุดุฉ ุงูุนููุงุก
2. ุงูุชุญ ูุดู ุญุณุงุจ ุนููู
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุนูุงุตุฑ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
4. ุงูุชุญ ุฃุนูุงุฑ ุงูุฏููู
5. ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุดู ุงูุญุณุงุจ ูุนุฑุถ ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฃุนูุงุฑ ุงูุฏููู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

#### 2.4 ุดุงุดุฉ ุงูููุฑุฏูู (`Suppliers.jsx`)
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุดุงุดุฉ ุงูููุฑุฏูู
2. ุงูุชุญ ููุงุชูุฑ ุงูููุฑุฏูู
3. ุชุฃูุฏ ูู ุฃู `outstanding_amount` ู `paid_amount` ุตุญูุญุฉ
4. ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุจูุงูุงุช ุตุญูุญุฉ

#### 2.5 ุดุงุดุฉ ุงูููุธููู (`PayrollPayments.jsx`)
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุดุงุดุฉ ุงูููุธููู
2. ุงูุชุญ ูุณู ุงูุณูู
3. ุชุฃูุฏ ูู ุฃู ุฑุตูุฏ ุงูุณูู ุตุญูุญ
4. ุชุฃูุฏ ูู ุฃู ุงูุฑุตูุฏ ููุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุตูุฏ ุงูุณูู ููุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุฑุตูุฏ ุตุญูุญ

### 3. ุงุฎุชุจุงุฑ ุงูุฑุจุท ุงูุชููุงุฆู

#### 3.1 ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช
**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ูุงุชูุฑุฉ ูุจูุนุงุช ุฌุฏูุฏุฉ
2. ุญุฏุฏ `status='issued'`
3. ุงุญูุธ ุงููุงุชูุฑุฉ
4. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   SELECT journal_entry_id FROM invoices WHERE id = [INVOICE_ID];
   ```
5. ุชุญูู ูู ูุฌูุฏ ููุฏ ูุญุงุณุจู:
   ```sql
   SELECT * FROM journal_entries WHERE id = [JOURNAL_ENTRY_ID];
   ```
6. ุชุญูู ูู ุฃู ุงูููุฏ ููุดูุฑ:
   ```sql
   SELECT status FROM journal_entries WHERE id = [JOURNAL_ENTRY_ID];
   ```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุงุชูุฑุฉ ูุฑุจูุทุฉ ุจููุฏ ูุญุงุณุจู (`journal_entry_id` ููุฌูุฏ)
- โ ุงูููุฏ ููุดูุฑ (`status='posted'`)
- โ ุงูููุฏ ูุชูุงุฒู (ุงููุฏูู = ุงูุฏุงุฆู)

#### 3.2 ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุงุชูุฑุฉ ููุฑุฏูู
**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ูุงุชูุฑุฉ ููุฑุฏูู ุฌุฏูุฏุฉ
2. ุญุฏุฏ `status='issued'`
3. ุงุญูุธ ุงููุงุชูุฑุฉ
4. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   SELECT journal_entry_id FROM supplier_invoices WHERE id = [INVOICE_ID];
   ```
5. ุชุญูู ูู ูุฌูุฏ ููุฏ ูุญุงุณุจู ููุดูุฑ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุงุชูุฑุฉ ูุฑุจูุทุฉ ุจููุฏ ูุญุงุณุจู
- โ ุงูููุฏ ููุดูุฑ

#### 3.3 ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุตุฑูู
**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ ูุตุฑูู ุฌุฏูุฏ
2. ุญุฏุฏ `status='posted'`
3. ุงุญูุธ ุงููุตุฑูู
4. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   SELECT journal_entry_id FROM expenses WHERE id = [EXPENSE_ID];
   ```
5. ุชุญูู ูู ูุฌูุฏ ููุฏ ูุญุงุณุจู ููุดูุฑ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุตุฑูู ูุฑุจูุท ุจููุฏ ูุญุงุณุจู
- โ ุงูููุฏ ููุดูุฑ

### 4. ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ

#### 4.1 ุงุฎุชุจุงุฑ ุชูุฑูุฑ ุงููุจูุนุงุช ููุงุจู ุงููุตุฑููุงุช
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุชูุฑูุฑ ุงููุจูุนุงุช ููุงุจู ุงููุตุฑููุงุช
2. ุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
4. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุชุญุฐูุฑุงุช ุนู ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ูุง ุชูุฌุฏ ุชุญุฐูุฑุงุช

#### 4.2 ุงุฎุชุจุงุฑ ุชูุฑูุฑ ุงููุจูุนุงุช ุญุณุจ ุงููุฑูุน
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุชูุฑูุฑ ุงููุจูุนุงุช ุญุณุจ ุงููุฑูุน
2. ุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
4. ุชุฃูุฏ ูู ุฃู ุงูููุงุชุฑ ุชุนูู ุจุดูู ุตุญูุญ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูููุงุชุฑ ุชุนูู ุจุดูู ุตุญูุญ

#### 4.3 ุงุฎุชุจุงุฑ ุฅูุฑุงุฑ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ
**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุฅูุฑุงุฑ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ
2. ุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ
3. ุชุฃูุฏ ูู ุฃู ุถุฑูุจุฉ ุงููุฎุฑุฌุงุช ูู ุญุณุงุจ `2141` ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
4. ุชุฃูุฏ ูู ุฃู ุถุฑูุจุฉ ุงููุฏุฎูุงุช ูู ุญุณุงุจ `1150` ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุถุฑุงุฆุจ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงูุญุณุงุจุงุช ุตุญูุญุฉ

### 5. ุงุฎุชุจุงุฑุงุช SQL ูุจุงุดุฑุฉ

#### 5.1 ุงูุชุญูู ูู ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ
```sql
SELECT je.id, je.entry_number,
       SUM(jp.debit) as total_debit,
       SUM(jp.credit) as total_credit
FROM journal_entries je
JOIN journal_postings jp ON jp.journal_entry_id = je.id
WHERE je.status = 'posted'
GROUP BY je.id, je.entry_number
HAVING ABS(SUM(jp.debit) - SUM(jp.credit)) > 0.01;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุง ุชูุฌุฏ ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ (ุงููุชูุฌุฉ ูุงุฑุบุฉ)

#### 5.2 ุงูุชุญูู ูู ุงูููุงุชูุฑ ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
```sql
SELECT COUNT(*) as count
FROM invoices i
WHERE i.status = 'posted' AND i.journal_entry_id IS NULL;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุชูุฌุฉ = 0 (ุฌููุน ุงูููุงุชูุฑ ุงูููุดูุฑุฉ ูุฑุจูุทุฉ ุจูููุฏ)

#### 5.3 ุงูุชุญูู ูู ููุงุชูุฑ ุงูููุฑุฏูู ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
```sql
SELECT COUNT(*) as count
FROM supplier_invoices si
WHERE si.status = 'posted' AND si.journal_entry_id IS NULL;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุชูุฌุฉ = 0 (ุฌููุน ููุงุชูุฑ ุงูููุฑุฏูู ุงูููุดูุฑุฉ ูุฑุจูุทุฉ ุจูููุฏ)

#### 5.4 ุงูุชุญูู ูู ุงููุตุฑููุงุช ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
```sql
SELECT COUNT(*) as count
FROM expenses e
WHERE e.status = 'posted' AND e.journal_entry_id IS NULL;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงููุชูุฌุฉ = 0 (ุฌููุน ุงููุตุฑููุงุช ุงูููุดูุฑุฉ ูุฑุจูุทุฉ ุจูููุฏ)

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุฌููุน ุงูุฌุฏุงูู ุชุฏุนู `journal_entry_id`
- [x] ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ

### Backend APIs
- [x] ุฌููุน endpoints ุชุณุชุฎุฏู `je.status = 'posted'` ููุท
- [x] ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- [x] ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

### Frontend
- [x] ุฌููุน ุงูุดุงุดุงุช ุชูุฑุฑ `status='posted'` ุตุฑุงุญุฉ ุฃู ุชุนุชูุฏ ุนูู backend ุงูุงูุชุฑุงุถู
- [x] ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- [x] ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

### ุงูุฑุจุท ุงูุชููุงุฆู
- [x] ููุงุชูุฑ ุงููุจูุนุงุช โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
- [x] ููุงุชูุฑ ุงูููุฑุฏูู โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง
- [x] ุงููุตุฑููุงุช โ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ุงููุธุงู ุงูุขู 100% ูุทุงุจู ูููุนุงููุฑ ุงููุญุงุณุจูุฉ ุงูุตุงุฑูุฉ!**

ุฌููุน ุงูุดุงุดุงุช ูุงูุชูุงุฑูุฑ ุชุณุชูุฏ ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุทุ ูุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง.
