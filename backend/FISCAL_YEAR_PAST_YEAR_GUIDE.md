# ุฏููู ุฅุฏุฎุงู ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู ุณูุฉ ูุงููุฉ ุณุงุจูุฉ
# Guide: Entering Opening Balances from Past Fiscal Year

**ุงูุชุงุฑูุฎ:** 2026-01-22

---

## ๐ ุงูุณููุงุฑูู (Scenario)

**ุงููุฏู:** ุฅุฏุฎุงู ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู ุณูุฉ 2025 ุฅูู ุงูุณูุฉ ุงูุญุงููุฉ (2026)

**ุงูุจูุงูุงุช:** ูููุฏ ููููุฉ ููุท (ุจุฏูู ููุงุชูุฑ)

---

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### ุงูุฎุทูุฉ 1: ูุชุญ ุณูุฉ 2025 ูุคูุชุงู

**Endpoint:** `POST /api/fiscal-years/:id/temporary-open`

**ุงููุชุทูุจุงุช:**
- ุงูุณูุฉ 2025 ูุฌุจ ุฃู ุชููู ููุฌูุฏุฉ ููุบููุฉ (`status = 'closed'`)
- ูุฌุจ ุฅุฏุฎุงู ุณุจุจ ุงููุชุญ ุงููุคูุช (ุฅูุฒุงูู)

**ูุซุงู:**
```bash
curl -X POST http://localhost:5000/api/fiscal-years/1/temporary-open \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "reason": "ุฅุฏุฎุงู ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู 2025"
  }'
```

**ุงููุชูุฌุฉ:**
```json
{
  "id": 1,
  "year": 2025,
  "status": "closed",
  "temporary_open": true,
  "temporary_open_reason": "ุฅุฏุฎุงู ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู 2025",
  "message": "ุชู ูุชุญ ุงูุณูุฉ ุงููุงููุฉ ูุคูุชุงู ุจูุฌุงุญ"
}
```

---

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ูููุฏ ููููุฉ (ุฃุฑุตุฏุฉ ูุฑุญูุฉ)

**Endpoint:** `POST /api/journal`

**ุงููุชุทูุจุงุช:**
- ุงูุชุงุฑูุฎ ูุฌุจ ุฃู ูููู ุถูู ูุทุงู ุณูุฉ 2025 (2025-01-01 ุฅูู 2025-12-31)
- ุงูููุฏ ูุฌุจ ุฃู ูููู ูุชูุงุฒู (ูุฌููุน ุงููุฏูู = ูุฌููุน ุงูุฏุงุฆู)
- ุงุณุชุฎุฏู `reference_type: 'opening'` ููุชูููุฒ

**ูุซุงู:**
```bash
curl -X POST http://localhost:5000/api/journal \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "date": "2025-12-31",
    "description": "ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู 2025 - ุญุณุงุจ ุงูููุฏูุฉ",
    "reference_type": "opening",
    "postings": [
      {
        "account_id": 1,
        "debit": 50000.00,
        "credit": 0
      },
      {
        "account_id": 2,
        "debit": 0,
        "credit": 50000.00
      }
    ]
  }'
```

**ุงูุชุญูู ุงูุชููุงุฆู:**
- โ `validateFiscalYear` middleware ูุชุญูู ูู ุฃู 2025 ููุชูุญุฉ ูุคูุชุงู
- โ ุฅุฐุง ูุงูุช ูุบููุฉ โ ูุฑูุถ ุงูุทูุจ ุจุฑุณุงูุฉ: `"ุงูุณูุฉ ุงููุงููุฉ 2025 ูุบููุฉ"`
- โ ุฅุฐุง ูุงูุช ููุชูุญุฉ ูุคูุชุงู โ ูุณูุญ ุจุงูุฅูุดุงุก

**ุงููุชูุฌุฉ:**
```json
{
  "id": 10,
  "entry_number": 10,
  "description": "ุฃุฑุตุฏุฉ ูุฑุญูุฉ ูู 2025 - ุญุณุงุจ ุงูููุฏูุฉ",
  "date": "2025-12-31",
  "reference_type": "opening",
  "status": "draft",
  "postings": [...]
}
```

---

### ุงูุฎุทูุฉ 3: ุชุฑุญูู ุงูููุฏ (Post Entry)

**Endpoint:** `POST /api/journal/:id/post`

**ูุซุงู:**
```bash
curl -X POST http://localhost:5000/api/journal/10/post \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ:**
- โ ุงูููุฏ ูุตุจุญ `status = 'posted'`
- โ ูุธูุฑ ูู ุงูููุงุฆู ูุงูุชูุงุฑูุฑ

---

### ุงูุฎุทูุฉ 4: ุฅููุงู ุงููุชุญ ุงููุคูุช

**Endpoint:** `POST /api/fiscal-years/:id/temporary-close`

**ูุซุงู:**
```bash
curl -X POST http://localhost:5000/api/fiscal-years/1/temporary-close \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ุงููุชูุฌุฉ:**
```json
{
  "id": 1,
  "year": 2025,
  "status": "closed",
  "temporary_open": false,
  "message": "ุชู ุฅุบูุงู ุงููุชุญ ุงููุคูุช ุจูุฌุงุญ"
}
```

**ุจุนุฏ ุงูุฅููุงู:**
- โ ูุง ูููู ุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ ุจุชุงุฑูุฎ 2025
- โ ุงููููุฏ ุงูููุฌูุฏุฉ ุชุจูู ูุฑุฆูุฉ ูู ุงูููุงุฆู
- โ ุชุธูุฑ ูู ุงูุชูุงุฑูุฑ ุนูุฏ ุงุฎุชูุงุฑ ุงููุชุฑุฉ ุงูููุงุณุจุฉ

---

## ๐ ุนุฑุถ ุงูุจูุงูุงุช (Viewing Data)

### ูู ูุงุฆูุฉ ุงููููุฏ

**Endpoint:** `GET /api/journal?from=2025-01-01&to=2025-12-31&status=posted`

**ุงููุชูุฌุฉ:**
- โ ุชุธูุฑ ููุท ุงููููุฏ ุจุชุงุฑูุฎ 2025
- โ ุงููููุฏ ูู 2026 ูุง ุชุธูุฑ

**ูุซุงู ูู Frontend:**
```javascript
const entries2025 = await apiJournal.list({
  from: '2025-01-01',
  to: '2025-12-31',
  status: 'posted'
});
```

### ูู ุงูุชูุงุฑูุฑ

**Trial Balance:**
```
GET /api/reports/trial-balance?from=2025-01-01&to=2025-12-31
```

**Income Statement:**
```
GET /api/reports/income-statement?from=2025-01-01&to=2025-12-31
```

**Cash Flow:**
```
GET /api/reports/cash-flow?from=2025-01-01&to=2025-12-31
```

**ุงููุชูุฌุฉ:**
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุจูุงูุงุช 2025 ููุท
- โ ุงูุจูุงูุงุช ูู 2026 ูุง ุชุธูุฑ

---

## โ ุงูุชุฃููุฏุงุช (Confirmations)

### 1. ุงููููุฏ ุชุธูุฑ ูู ุงูุณูุฉ ุงูุตุญูุญุฉ

**โ ูุคูุฏ:**

- ุงููููุฏ ูุชู ููุชุฑุชูุง ุญุณุจ `date` ูู ุงูุงุณุชุนูุงูุงุช
- ุนูุฏ ุงุฎุชูุงุฑ `from: '2025-01-01'` ู `to: '2025-12-31'` โ ุชุธูุฑ ููุท ูููุฏ 2025
- ุนูุฏ ุงุฎุชูุงุฑ `from: '2026-01-01'` ู `to: '2026-12-31'` โ ุชุธูุฑ ููุท ูููุฏ 2026

### 2. ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู ููุณ ุงูููุชุฑุฉ

**โ ูุคูุฏ:**

- ุฌููุน ุงูุชูุงุฑูุฑ ุชุณุชุฎุฏู `je.date BETWEEN $1 AND $2`
- ุงูุจูุงูุงุช ุชุธูุฑ ูู ุงูุณูุฉ ุงูุตุญูุญุฉ ุชููุงุฆูุงู
- ูุง ุญุงุฌุฉ ูููุชุฑุฉ ุฅุถุงููุฉ ุญุณุจ `fiscal_year_id`

### 3. ูุง ูููู ุฅูุดุงุก ูููุฏ ูู ุณูุฉ ูุบููุฉ

**โ ูุคูุฏ:**

- `validateFiscalYear` middleware ูุฑูุถ ุงูุทูุจ ุฅุฐุง ูุงูุช ุงูุณูุฉ ูุบููุฉ
- ุงูุฑุณุงูุฉ: `"ุงูุณูุฉ ุงููุงููุฉ 2025 ูุบููุฉ"`
- ูุง ูููู ุชุฌุงูุฒ ูุฐุง ุงูุชุญูู

### 4. ุงูุจูุงูุงุช ุชุจูู ูุฑุฆูุฉ ุจุนุฏ ุฅููุงู ุงููุชุญ ุงููุคูุช

**โ ูุคูุฏ:**

- ุงููููุฏ ุงูุชู ุชู ุฅูุดุงุคูุง ุชุจูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุธูุฑ ูู ุงูููุงุฆู ุนูุฏ ุงุฎุชูุงุฑ ุงููุชุฑุฉ ุงูููุงุณุจุฉ
- ูุง ูุชู ุญุฐููุง ุนูุฏ ุฅููุงู ุงููุชุญ ุงููุคูุช

---

## ๐ฏ ุงูุฎูุงุตุฉ (Summary)

### ุงููุธุงู ูุฏุนู ุจุงููุงูู:

1. โ **ูุชุญ ุณูุฉ ูุงููุฉ ุณุงุจูุฉ ูุคูุชุงู** - ูุนูู ุจุดูู ุตุญูุญ
2. โ **ุฅุฏุฎุงู ูููุฏ ููููุฉ ููุท** - ูุนูู ุจุดูู ุตุญูุญ (ุจุฏูู ููุงุชูุฑ)
3. โ **ุฅููุงู ุงููุชุญ ุงููุคูุช** - ูุนูู ุจุดูู ุตุญูุญ
4. โ **ุนุฑุถ ุงูุจูุงูุงุช ูู ุงูุณูุฉ ุงูุตุญูุญุฉ** - ูุนูู ุจุดูู ุตุญูุญ
5. โ **ุงูุชุญูู ูู ุงูุณูุฉ ุงููุงููุฉ** - ูุนูู ุจุดูู ุตุญูุญ

### ุงูุชูุตูุงุช:

1. **ุงุณุชุฎุฏู `from` ู `to`** ูุชุญุฏูุฏ ูุทุงู ุงูุณูุฉ ูู ุฌููุน ุงูููุงุฆู ูุงูุชูุงุฑูุฑ
2. **ุงุณุชุฎุฏู `reference_type: 'opening'`** ููุชูููุฒ ุจูู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ูุงููููุฏ ุงูุนุงุฏูุฉ
3. **ุชุฃูุฏ ูู ุฅููุงู ุงููุชุญ ุงููุคูุช** ุจุนุฏ ุงูุงูุชูุงุก ูู ุฅุฏุฎุงู ุงูุจูุงูุงุช

---

**ุชู ุฅูุดุงุก ุงูุฏููู:** 2026-01-22  
**ุงูุญุงูุฉ:** โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู
