# ุณูุฑูุจุช ุงููุฒุงููุฉ ุงูุฐูู - sync.js

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุณูุฑูุจุช Node.js ุฐูู ููุฒุงููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL. ูููู ุจู:

- โ ุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
- โ ุฅูุดุงุก ุงูุฌุฏุงูู ุงูููููุฏุฉ ุชููุงุฆูุงู
- โ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงููุงูุตุฉ ููุท (ุจุฏูู ุชูุฑุงุฑ)
- โ ุฅุถุงูุฉ ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ ุงููุงูุตุฉ
- โ ูุง ูุญุฐู ุฃู ูุนุฏู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ

## ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุทุฑููุฉ 1: ูู ุงููุฌูุฏ ุงูุฑุฆูุณู
```bash
node backend/scripts/sync.js
```

### ุงูุทุฑููุฉ 2: ูู ูุฌูุฏ backend
```bash
cd backend
node scripts/sync.js
```

### ุงูุทุฑููุฉ 3: ูุน DATABASE_URL ูุจุงุดุฑุฉ
```bash
DATABASE_URL=postgresql://user:pass@host:port/dbname node backend/scripts/sync.js
```

## ๐ ุงูุฌุฏุงูู ุงููุฏุนููุฉ

ุงูุณูุฑูุจุช ูุฏุนู ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ ููุฌุฏุงูู ุงูุชุงููุฉ:

1. **accounts** - ุงูุญุณุงุจุงุช ุงููุญุงุณุจูุฉ
2. **journal_entries** - ุงููููุฏ ุงููุญุงุณุจูุฉ
3. **journal_postings** - ุณุทูุฑ ุงููููุฏ
4. **expenses** - ุงููุตุฑููุงุช
5. **invoices** - ุงูููุงุชูุฑ
6. **audit_log** - ุณุฌู ุงูุนูููุงุช

## ๐ ูุง ููุนูู ุงูุณูุฑูุจุช

### 1. ููุฌุฏุงูู ุงูููููุฏุฉ:
- ููุดุฆ ุงูุฌุฏูู ูุงููุงู ูุน ุฌููุน ุงูุฃุนูุฏุฉ
- ูุถูู ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ ุงููุทููุจุฉ

### 2. ููุฌุฏุงูู ุงูููุฌูุฏุฉ:
- ูุชุญูู ูู ูู ุนููุฏ ูู ุงูุชุนุฑูู
- ูุถูู ููุท ุงูุฃุนูุฏุฉ ุงูููููุฏุฉ
- ูุชุญูู ูู ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ
- ูุถูู ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ ุงููุงูุตุฉ

### 3. ุงูุฃูุงู:
- โ ูุง ูุญุฐู ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ
- โ ูุง ูุญุฐู ุงูุฃุนูุฏุฉ ุงูููุฌูุฏุฉ
- โ ูุง ูุนุฏู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- โ ูุถูู ููุท ูุง ูู ููููุฏ

## ๐ ูุซุงู ุนูู ุงููุฎุฑุฌุงุช

```
๐ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช...
โ ุชู ุงูุงุชุตุงู ุจูุฌุงุญ!

๐ ุจุฏุก ูุฒุงููุฉ ุงูุฌุฏุงูู...

๐ ูุนุงูุฌุฉ ุฌุฏูู: accounts
๐ ูุนุงูุฌุฉ ุฌุฏูู: journal_entries
๐ ูุนุงูุฌุฉ ุฌุฏูู: journal_postings
๐ ูุนุงูุฌุฉ ุฌุฏูู: expenses
   ๐ Foreign key fk_expense_journal added on expenses.journal_entry_id
๐ ูุนุงูุฌุฉ ุฌุฏูู: invoices
   ๐ Foreign key fk_invoice_journal added on invoices.journal_entry_id
๐ ูุนุงูุฌุฉ ุฌุฏูู: audit_log

โโ ุชูุช ูุฒุงููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!

๐ ุงูุฌุฏุงูู ุงููุชุฒุงููุฉ:
   - accounts
   - audit_log
   - expenses
   - invoices
   - journal_entries
   - journal_postings

๐ ุชู ุฅุบูุงู ุงูุงุชุตุงู
```

## ๐ง ุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏ

ูุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏุ ุฃุถูู ุฅูู ูุตูููุฉ `tables` ูู `sync.js`:

```javascript
{
  name: 'new_table',
  columns: [
    { name: 'id', type: 'SERIAL PRIMARY KEY' },
    { name: 'name', type: 'TEXT' },
    { name: 'created_at', type: 'TIMESTAMP DEFAULT NOW()' }
  ],
  foreignKeys: [
    { 
      column: 'user_id', 
      refTable: 'users', 
      refColumn: 'id', 
      onDelete: 'CASCADE',
      constraintName: 'fk_new_table_user_id'
    }
  ]
}
```

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **PRIMARY KEY**: ูุง ูููู ุฅุถุงูุฉ PRIMARY KEY ูุนููุฏ ููุฌูุฏุ ูุฐูู ูุชู ุชุฎุทูู ูู ALTER TABLE
2. **UNIQUE**: ูููู ุฅุถุงูุฉ UNIQUE constraint ูุนููุฏ ููุฌูุฏ
3. **Foreign Keys**: ูุชู ุงูุชุญูู ูู ูุฌูุฏูุง ูุจู ุงูุฅุถุงูุฉ ูุชุฌูุจ ุงูุฃุฎุทุงุก
4. **JSONB**: ูุฏุนู ููุน ุงูุจูุงูุงุช JSONB
5. **TIMESTAMP WITH TIME ZONE**: ูุณุชุฎุฏู TIMESTAMPTZ ููุชูุงูู ูุน PostgreSQL

## ๐ฏ ูุชู ุชุณุชุฎุฏู sync.jsุ

- โ ุนูุฏ ุฅุถุงูุฉ ุฌุฏูู ุฌุฏูุฏ ูููุธุงู
- โ ุนูุฏ ุฅุถุงูุฉ ุนููุฏ ุฌุฏูุฏ ูุฌุฏูู ููุฌูุฏ
- โ ุนูุฏ ุฅุถุงูุฉ Foreign Key ุฌุฏูุฏ
- โ ุนูุฏ ูุดุฑ ุงูุชุทุจูู ุนูู ุจูุฆุฉ ุฌุฏูุฏุฉ
- โ ุนูุฏ ุงูุชุฑููุฉ ุฅูู ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฃูุงู

ุงูุณูุฑูุจุช ุขูู ุชูุงูุงู:
- ูุง ูุญุฐู ุฃู ุจูุงูุงุช
- ูุง ูุนุฏู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- ูููู ุชุดุบููู ุนุฏุฉ ูุฑุงุช ุจุฃูุงู
- ูุชุญูู ูู ูู ุดูุก ูุจู ุงูุฅุถุงูุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-XX  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
