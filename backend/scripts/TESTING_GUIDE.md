# ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ูููุธุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุงุฎุชุจุงุฑ ุงููุธุงู ุจุนุฏ ุงูุชุญุฏูุซุงุช ุงูุชู ุชูุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูู API.

---

## 1๏ธโฃ Backend / API Testing

### ุงููุชุทูุจุงุช

1. **ุชุดุบูู ุงูุฎุงุฏู:**
   ```bash
   cd backend
   npm start
   ```

2. **ุชุฃูุฏ ูู ูุฌูุฏ ูุณุชุฎุฏู admin:**
   ```bash
   node createAdmin.js
   ```

### ุงูุณูุฑูุจุชุงุช ุงููุชุงุญุฉ

#### 1. ุงุฎุชุจุงุฑ API Endpoints ุงูุดุงูู

```bash
node backend/scripts/test-api-endpoints.js
```

**ูุง ูุฎุชุจุฑู:**
- โ ุชุณุฌูู ุงูุฏุฎูู
- โ CRUD operations ููู endpoint:
  - `/api/accounts`
  - `/api/expenses`
  - `/api/invoices`
  - `/api/journal`
  - `/api/orders`
- โ Posting operations (ุชุฑุญูู ุงููุตุฑููุงุช)
- โ Foreign Keys integrity

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
```
๐งช ุจุฏุก ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน API Endpoints
============================================================
๐ Base URL: http://localhost:4000
๐ API Base: http://localhost:4000/api
============================================================

๐ ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู...
โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ

๐ ุงุฎุชุจุงุฑ ุงูุญุณุงุจุงุช (Accounts)...
โ GET /api/accounts
   ุชู ุฌูุจ 7 ุญุณุงุจ

๐ฐ ุงุฎุชุจุงุฑ ุงููุตุฑููุงุช (Expenses)...
โ POST /api/expenses (Create)
โ GET /api/expenses/1
โ PUT /api/expenses/1 (Update)
โ POST /api/expenses/1/post
   โ ุชู ุฑุจุท ุงููุตุฑูู ุจููุฏ #1
โ GET /api/expenses (List)

...
```

#### 2. ุฅุถุงูุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ

```bash
node backend/scripts/seed-test-data.js
```

**ูุง ูุถููู:**
- โ 7 ุญุณุงุจุงุช ูุญุงุณุจูุฉ ุฃุณุงุณูุฉ
- โ 2 ูุตุฑููุงุช ุชุฌุฑูุจูุฉ
- โ 1 ูุงุชูุฑุฉ ุชุฌุฑูุจูุฉ
- โ 1 ููุฏ ูุญุงุณุจู ุชุฌุฑูุจู

#### 3. ุงูุชุญูู ูู ุณูุงูุฉ ุงูุจูุงูุงุช

```bash
node backend/scripts/check-integrity.js
```

**ูุง ูุชุญูู ููู:**
- โ ุฑุจุท ุงููุตุฑููุงุช ุจุงููููุฏ
- โ ุฑุจุท ุงูููุงุชูุฑ ุจุงููููุฏ
- โ ุณูุงูุฉ ุณุทูุฑ ุงููููุฏ
- โ ุชูุงุฒู ุงููููุฏ (ุงููุฏูู = ุงูุฏุงุฆู)
- โ ุงูุณุฌูุงุช ุงูููููุฏุฉ (Orphaned records)

---

## 2๏ธโฃ Frontend Testing

### ุงููุชุทูุจุงุช

1. **ุชุดุบูู Frontend:**
   ```bash
   cd backend/frontend
   npm start
   ```

2. **ุชุฃูุฏ ูู ุฃู Backend ูุนูู ุนูู `http://localhost:4000`**

### ุงูุตูุญุงุช ุงููุทููุจ ุงุฎุชุจุงุฑูุง

#### 1. ุดุงุดุฉ ุงููุตุฑููุงุช (`/expenses`)
- โ ุนุฑุถ ูุงุฆูุฉ ุงููุตุฑููุงุช
- โ ุฅุถุงูุฉ ูุตุฑูู ุฌุฏูุฏ
- โ ุชุนุฏูู ูุตุฑูู ููุฌูุฏ
- โ ุชุฑุญูู ูุตุฑูู (Post)
- โ ุงูุชุญูู ูู ุธููุฑ `journal_entry_id` ุจุนุฏ ุงูุชุฑุญูู

#### 2. ุดุงุดุฉ ุงูููุงุชูุฑ (`/invoices`)
- โ ุนุฑุถ ูุงุฆูุฉ ุงูููุงุชูุฑ
- โ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
- โ ุชุนุฏูู ูุงุชูุฑุฉ ููุฌูุฏุฉ
- โ ุชุฑุญูู ูุงุชูุฑุฉ (Post)

#### 3. ุดุงุดุฉ ุงููููุฏ (`/journal`)
- โ ุนุฑุถ ูุงุฆูุฉ ุงููููุฏ
- โ ุนุฑุถ ุชูุงุตูู ููุฏ ูุน ุณุทูุฑู
- โ ุฅูุดุงุก ููุฏ ูุฏูู
- โ ุชุฑุญูู ููุฏ

#### 4. ุดุงุดุฉ ุงูุญุณุงุจุงุช (`/accounts`)
- โ ุนุฑุถ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
- โ ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ
- โ ุชุนุฏูู ุญุณุงุจ ููุฌูุฏ

#### 5. ุดุงุดุฉ ุงูุทูุจุงุช (`/pos`)
- โ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- โ ุชุนุฏูู ุทูุจ
- โ ุฅูุบุงุก ุทูุจ

### ูุฑุงูุจุฉ Console

ุงูุชุญ Developer Tools ูู ุงููุชุตูุญ ููุฑุงูุจุฉ:
- โ ุฃุฎุทุงุก JavaScript
- โ ุฃุฎุทุงุก API calls
- โ๏ธ ุชุญุฐูุฑุงุช React

---

## 3๏ธโฃ ุฑุจุท Backend ูุน Frontend

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

#### ุณููุงุฑูู 1: ุฅูุดุงุก ูุตุฑูู ูุชุฑุญููู

1. **Frontend:** ุฅูุดุงุก ูุตุฑูู ุฌุฏูุฏ
   - ุงุฐูุจ ุฅูู `/expenses`
   - ุงุถุบุท "ุฅุถุงูุฉ ูุตุฑูู"
   - ุงููุฃ ุงูุจูุงูุงุช:
     - ุงูููุน: ูุตุฑูู
     - ุงููุจูุบ: 100
     - ุงูุญุณุงุจ: 5210
     - ุงููุตู: ูุตุฑูู ุงุฎุชุจุงุฑ
   - ุงุญูุธ

2. **Backend:** ุงูุชุญูู ูู API
   ```bash
   curl -X GET http://localhost:4000/api/expenses \
     -H "Authorization: Bearer YOUR_TOKEN"
   ```

3. **Frontend:** ุชุฑุญูู ุงููุตุฑูู
   - ุงุถุบุท ุฒุฑ "ุชุฑุญูู" ุนูู ุงููุตุฑูู
   - ุชุฃูุฏ ูู ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "posted"

4. **Backend:** ุงูุชุญูู ูู ุงูุฑุจุท
   ```bash
   node backend/scripts/check-integrity.js
   ```

5. **Frontend:** ุงูุชุญูู ูู ุงูููุฏ
   - ุงุฐูุจ ุฅูู `/journal`
   - ุชุฃูุฏ ูู ุธููุฑ ุงูููุฏ ุงูุฌุฏูุฏ
   - ุงูุชุญ ุงูููุฏ ูุชุฃูุฏ ูู ุงูุณุทูุฑ

#### ุณููุงุฑูู 2: ุฅูุดุงุก ูุงุชูุฑุฉ ูุชุฑุญูููุง

1. **Frontend:** ุฅูุดุงุก ูุงุชูุฑุฉ
   - ุงุฐูุจ ุฅูู `/invoices`
   - ุงุถุบุท "ุฅุถุงูุฉ ูุงุชูุฑุฉ"
   - ุงููุฃ ุงูุจูุงูุงุช
   - ุงุญูุธ

2. **Frontend:** ุชุฑุญูู ุงููุงุชูุฑุฉ
   - ุงุถุบุท ุฒุฑ "ุชุฑุญูู"
   - ุชุฃูุฏ ูู ุชุบููุฑ ุงูุญุงูุฉ

3. **Backend:** ุงูุชุญูู
   ```bash
   node backend/scripts/check-integrity.js
   ```

#### ุณููุงุฑูู 3: ุฅูุดุงุก ุทูุจ ูุชุญูููู ููุงุชูุฑุฉ

1. **Frontend:** ุฅูุดุงุก ุทูุจ ูู POS
   - ุงุฐูุจ ุฅูู `/pos/china_town/tables`
   - ุฃุถู ููุชุฌุงุช
   - ุงุญูุธ ุงูุทูุจ

2. **Frontend:** ุชุญููู ุงูุทูุจ ููุงุชูุฑุฉ
   - ุงูุชุญ ุงูุทูุจ
   - ุงุถุบุท "ุชุญููู ููุงุชูุฑุฉ"
   - ุชุฃูุฏ ูู ุฅูุดุงุก ุงููุงุชูุฑุฉ

3. **Backend:** ุงูุชุญูู
   ```bash
   curl -X GET http://localhost:4000/api/invoices \
     -H "Authorization: Bearer YOUR_TOKEN"
   ```

---

## 4๏ธโฃ ุงุฎุชุจุงุฑุงุช ููุงุฆูุฉ

### 1. ุงุฎุชุจุงุฑ Foreign Keys

#### ุงุฎุชุจุงุฑ CASCADE Delete
```sql
-- ุฅูุดุงุก ููุฏ ูุน ุณุทูุฑ
INSERT INTO journal_entries (description, date, status) 
VALUES ('Test', CURRENT_DATE, 'draft') RETURNING id;

-- ุฅุถุงูุฉ ุณุทูุฑ
INSERT INTO journal_postings (journal_entry_id, account_id, debit, credit)
VALUES (1, 1, 100, 0);

-- ุญุฐู ุงูููุฏ (ูุฌุจ ุญุฐู ุงูุณุทูุฑ ุชููุงุฆูุงู)
DELETE FROM journal_entries WHERE id = 1;

-- ุงูุชุญูู
SELECT COUNT(*) FROM journal_postings WHERE journal_entry_id = 1;
-- ูุฌุจ ุฃู ูููู 0
```

#### ุงุฎุชุจุงุฑ SET NULL
```sql
-- ุฅูุดุงุก ูุตุฑูู ูุฑุจูุท ุจููุฏ
UPDATE expenses SET journal_entry_id = 1 WHERE id = 1;

-- ุญุฐู ุงูููุฏ (ูุฌุจ ุฃู ูุตุจุญ journal_entry_id = NULL)
DELETE FROM journal_entries WHERE id = 1;

-- ุงูุชุญูู
SELECT journal_entry_id FROM expenses WHERE id = 1;
-- ูุฌุจ ุฃู ูููู NULL
```

### 2. ุงุฎุชุจุงุฑ ุงูุจูุงูุงุช ุงูููููุฉ

```bash
# ุฅุถุงูุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ
node backend/scripts/seed-test-data.js

# ุงุฎุชุจุงุฑ API
node backend/scripts/test-api-endpoints.js

# ุงูุชุญูู ูู ุงูุณูุงูุฉ
node backend/scripts/check-integrity.js
```

### 3. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

```bash
# ุงุฎุชุจุงุฑ ุชุญููู ูุงุฆูุฉ ุงููุตุฑููุงุช
time curl -X GET http://localhost:4000/api/expenses \
  -H "Authorization: Bearer YOUR_TOKEN"

# ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุตุฑูู
time curl -X POST http://localhost:4000/api/expenses \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"type":"expense","amount":100,"account_code":"5210","status":"draft"}'
```

---

## ๐ Checklist ุงูููุงุฆู

### Backend
- [ ] ุฌููุน API endpoints ุชุนูู
- [ ] CRUD operations ุชุนูู ููู endpoint
- [ ] Posting operations ุชุนูู
- [ ] Foreign Keys integrity ุตุญูุญ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console

### Frontend
- [ ] ุฌููุน ุงูุตูุญุงุช ุชุนูู
- [ ] Forms ุชุนุฑุถ ุงูุฃุนูุฏุฉ ุงูุตุญูุญุฉ
- [ ] ุนูููุงุช ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู/ุงูุญุฐู ุชุนูู
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console ุงููุชุตูุญ
- [ ] ุงูุฑุณุงุฆู (success/error) ุชุธูุฑ ุจุดูู ุตุญูุญ

### Integration
- [ ] ุฅูุดุงุก ูุตุฑูู โ ุชุฑุญูู โ ููุฏ ูุนูู
- [ ] ุฅูุดุงุก ูุงุชูุฑุฉ โ ุชุฑุญูู โ ููุฏ ูุนูู
- [ ] ุฅูุดุงุก ุทูุจ โ ุชุญููู ููุงุชูุฑุฉ ูุนูู
- [ ] ุฌููุน ุงูุงุณุชุฌุงุจุงุช API ุตุญูุญุฉ

### Integrity
- [ ] ูุง ุชูุฌุฏ orphaned records
- [ ] ุฌููุน ุงููููุฏ ูุชูุงุฒูุฉ
- [ ] Foreign Keys ุชุนูู (CASCADE/SET NULL)

---

## ๐ ุณูุฑ ุงูุนูู ุงูููุตู ุจู

1. **ุงูุฎุทูุฉ 1:** ุฅุถุงูุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ
   ```bash
   node backend/scripts/seed-test-data.js
   ```

2. **ุงูุฎุทูุฉ 2:** ุงุฎุชุจุงุฑ API
   ```bash
   node backend/scripts/test-api-endpoints.js
   ```

3. **ุงูุฎุทูุฉ 3:** ุงูุชุญูู ูู ุงูุณูุงูุฉ
   ```bash
   node backend/scripts/check-integrity.js
   ```

4. **ุงูุฎุทูุฉ 4:** ุงุฎุชุจุงุฑ Frontend ูุฏููุงู
   - ุดุบูู Frontend
   - ุงุฎุชุจุฑ ูู ุตูุญุฉ
   - ุฑุงูุจ console

5. **ุงูุฎุทูุฉ 5:** ุงุฎุชุจุงุฑ Integration
   - ุงุฎุชุจุฑ ุงูุณููุงุฑูููุงุช ุงููุงููุฉ
   - ุชุญูู ูู ุงูุฑุจุท ุจูู Frontend ู Backend

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. **ุงุณุชุฎุฏู ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ:** ูุง ุชุฎุชุจุฑ ุนูู ุจูุงูุงุช ุญููููุฉ
2. **ุฑุงูุจ Logs:** ุฑุงูุจ console ูู Backend ู Frontend
3. **ุงุฎุชุจุฑ Edge Cases:** ุงุฎุชุจุฑ ุงูุญุงูุงุช ุงูุญุฏูุฉ (ููู ูุงุฑุบุฉุ ููู ูุจูุฑุฉุ ุฅูุฎ)
4. **ุงุฎุชุจุฑ ุงูุฃุฎุทุงุก:** ุชุฃูุฏ ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
5. **ุงุฎุชุจุฑ ุงูุฃุฏุงุก:** ุฑุงูุจ ููุช ุงูุงุณุชุฌุงุจุฉ ููู API calls

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-XX  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
