# ุชูุฑูุฑ ูุฑุงุฌุนุฉ ุดุงููุฉ ูุฌููุน ุงููุญุฏุงุช ูุงูุดุงุดุงุช

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุดุงุดุฉ ุงูุนููุงุก (Clients)

#### ุงููุดุงูู ุงูููุชุดูุฉ:
- โ `ClientStatement.jsx` ูุนุชูุฏ ุนูู `invoices.list` ู `payments.list` ูุจุงุดุฑุฉ ุจุฏูุงู ูู ุงููููุฏ ุงูููุดูุฑุฉ โ **ุชู ุงูุฅุตูุงุญ**
- โ `ClientsAging.jsx` ูุนุชูุฏ ุนูู `invoices.list` ูุจุงุดุฑุฉ โ **ุชู ุงูุฅุตูุงุญ**
- โ ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงูููุงุชูุฑ ูุงููุฏููุนุงุช ูููุณ ูู ุงููููุฏ โ **ุชู ุงูุฅุตูุงุญ**

#### ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:
- โ ุชู ุฅูุดุงุก endpoint ุฌุฏูุฏ `/api/partners/:id/balance` ูุญุณุงุจ ุงูุฑุตูุฏ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุฅูุดุงุก endpoint ุฌุฏูุฏ `/api/partners/:id/statement` ููุดู ุงูุญุณุงุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุชุญุฏูุซ `ClientStatement.jsx` ูุงุณุชุฎุฏุงู `/api/partners/:id/statement` ุจุฏูุงู ูู invoices ู payments
- โ ุชู ุชุญุฏูุซ ุญุณุงุจ ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุงูุฎุชุงูู ููุนุชูุฏ ุนูู ุงููููุฏ ููุท
- โ ุชู ุฅุตูุงุญ `getOrCreatePartnerAccount` ูุงุณุชุฎุฏุงู ุญุณุงุจ `1171` (ุงูุนููุงุก) ุจุฏูุงู ูู `1141`

#### ุงูููุฏ ุงููุญุฏุซ:
- `backend/server.js`: ุฅุถุงูุฉ endpoints `/api/partners/:id/balance` ู `/api/partners/:id/statement`
- `backend/frontend/src/services/api/index.js`: ุฅุถุงูุฉ `partners.balance()` ู `partners.statement()`
- `backend/frontend/src/components/ClientStatement.jsx`: ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงููุฉ ูุงุณุชุฎุฏุงู ุงููููุฏ ููุท

### 2. ุดุงุดุฉ ุงูููุฑุฏูู (Suppliers)

#### ุงููุดุงูู ุงูููุชุดูุฉ:
- โ๏ธ `Suppliers.jsx` ูุนุชูุฏ ุนูู `outstanding_amount` ู `paid_amount` ูู invoices
- โ๏ธ ูุง ููุฌุฏ endpoint ูุญุณุงุจ ุฃุฑุตุฏุฉ ุงูููุฑุฏูู ูู ุงููููุฏ

#### ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:
- โ ุชู ุชุญุฏูุซ `handleGetSupplierInvoices` ูุญุณุงุจ `outstanding_amount` ู `paid_amount` ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุชุญุฏูุซ `Suppliers.jsx` ูุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ
- โ ุชู ุชูุนูู ุฑุจุท ููุงุชูุฑ ุงูููุฑุฏูู ุจุงููููุฏ ุงููุญุงุณุจูุฉ ูู `handlePostSupplierInvoice`
- โ ุชู ุชุญุฏูุซ `handleCreateSupplierInvoice` ูุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆููุง ุนูุฏ `status='issued'`

### 3. ุดุงุดุฉ ุงููููุฏ ุงูููููุฉ (Journal)

#### ุงูุญุงูุฉ:
- โ ุฌููุน ุงููููุฏ ูุชู ุงูุชุญูู ูู ุชูุงุฒููุง ูุจู ุงููุดุฑ
- โ ุงููููุฏ ุงูููุดูุฑุฉ ููุท ุชุธูุฑ ูู ุงูุชูุงุฑูุฑ
- โ ุชู ุงูุชุญูู ูู ุฃู ุฌููุน ุงููููุฏ ุงูููุดูุฑุฉ ูุชูุงุฒูุฉ

### 4. ุดุงุดุฉ ุงูููุธููู (Employees)

#### ุงููุดุงูู ุงูููุชุดูุฉ:
- โ๏ธ `PayrollPayments.jsx` ูุนุฑุถ `advance_balance` ูู ุฌุฏูู employees ูุจุงุดุฑุฉ
- โ๏ธ ูุฌุจ ุฃู ููุญุณุจ ุงูุฑุตูุฏ ูู ุงููููุฏ ุงูููุดูุฑุฉ

#### ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:
- โ ุชู ุฅูุดุงุก endpoint `/api/employees/:id/advance-balance` ูุญุณุงุจ ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุชุญุฏูุซ `PayrollPayments.jsx` ูุงุณุชุฎุฏุงู ูุฐุง endpoint
- โ ูุชู ุฅุนุงุฏุฉ ุชุญููู ุฑุตูุฏ ุงูุณูู ุจุนุฏ ููุญ ุฃู ุฌูุน ุงูุณููุฉ

### 5. ุดุงุดุฉ ุงููุตุฑููุงุช (Expenses)

#### ุงููุดุงูู ุงูููุชุดูุฉ:
- โ๏ธ `expenses` table ูุง ูุญุชูู ุนูู `journal_entry_id`
- โ๏ธ ูุง ูููู ุฑุจุท ุงููุตุฑููุงุช ุจุงููููุฏ ุจุดูู ูุจุงุดุฑ

#### ุงูุฅุตูุงุญุงุช ุงููุทููุจุฉ:
- โณ ุฅุถุงูุฉ ุนููุฏ `journal_entry_id` ุฅูู ุฌุฏูู `expenses`
- โณ ุชุญุฏูุซ ููุทู ุฅูุดุงุก ุงููุตุฑููุงุช ูุฑุจุทูุง ุจูููุฏ ูุญุงุณุจูุฉ

### 6. ุดุงุดุฉ ููุทุฉ ุงูุจูุน (POS)

#### ุงูุญุงูุฉ:
- โ ูุชู ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง ุนูุฏ ุฅุตุฏุงุฑ ุงููุงุชูุฑุฉ
- โ ุงููููุฏ ูุฑุชุจุทุฉ ุจุงูููุงุชูุฑ ุนุจุฑ `reference_type` ู `reference_id`

### 7. ุดุงุดุฉ ุงููุดุชุฑูุงุช (Purchases)

#### ุงููุดุงูู ุงูููุชุดูุฉ:
- โ๏ธ `supplier_invoices` table ูุง ูุญุชูู ุนูู `journal_entry_id`
- โ๏ธ ูุง ูููู ุฑุจุท ููุงุชูุฑ ุงูููุฑุฏูู ุจุงููููุฏ ุจุดูู ูุจุงุดุฑ

#### ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:
- โ ุชู ุฅุถุงูุฉ ุนููุฏ `journal_entry_id` ุฅูู ุฌุฏูู `supplier_invoices`
- โ ุชู ุฅูุดุงุก endpoint `/api/suppliers/aging` ูุญุณุงุจ ุฃุนูุงุฑ ุงูุฏููู ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุชุญุฏูุซ `handleCreateSupplierInvoice` ูุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆููุง ุนูุฏ `status='issued'`
- โ ูุชู ุฑุจุท ููุงุชูุฑ ุงูููุฑุฏูู ุจูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆููุง

### 8. ุดุงุดุฉ ุงูุชูุงุฑูุฑ (Reports)

#### ุงูุญุงูุฉ:
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุชู ุฅุตูุงุญ ุฌููุน ุงูุชูุงุฑูุฑ ูู ุงููุฑุงุฌุนุฉ ุงูุณุงุจูุฉ

## ๐ ูุงุฆูุฉ ุงูููุงู ุงููุชุจููุฉ

### ุฃููููุฉ ุนุงููุฉ:
1. โณ ุชุญุฏูุซ `Suppliers.jsx` ูุงุณุชุฎุฏุงู `/api/partners/:id/statement` ุจุฏูุงู ูู invoices
2. โณ ุชุญุฏูุซ `ClientsAging.jsx` ูุงุณุชุฎุฏุงู ุงููููุฏ ุจุฏูุงู ูู invoices
3. โณ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `expenses`
4. โณ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `supplier_invoices`
5. โณ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏูู `invoices` (ุฅู ูู ููู ููุฌูุฏูุง)

### ุฃููููุฉ ูุชูุณุทุฉ:
6. โณ ุฅูุดุงุก endpoint `/api/employees/:id/advance-balance` ูุญุณุงุจ ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ
7. โณ ุชุญุฏูุซ `PayrollPayments.jsx` ูุงุณุชุฎุฏุงู endpoint ุงูุณูู ุงูุฌุฏูุฏ
8. โณ ุชุญุฏูุซ ุฌููุน PDFs ููุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุงููููุฏ ููุท

### ุฃููููุฉ ููุฎูุถุฉ:
9. โณ ูุฑุงุฌุนุฉ ุฌููุน ุงูุดุงุดุงุช ุงูุฃุฎุฑู ููุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุงููููุฏ ููุท
10. โณ ุฅุถุงูุฉ ุชุญุฐูุฑุงุช ูู ุงููุงุฌูุฉ ุนูุฏ ูุฌูุฏ ุจูุงูุงุช ุบูุฑ ูุฑุชุจุทุฉ ุจูููุฏ

## ๐ ูุชุงุฆุฌ ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ

### ูู `audit_all_screens.cjs`:
- โ ุฌููุน ุงููููุฏ ุงูููุดูุฑุฉ ูุชูุงุฒูุฉ
- โ๏ธ 2 ูู 2 ุนููู ุจุฏูู ุญุณุงุจ ูุญุงุณุจู (ูุชู ุฅูุดุงุคูุง ุชููุงุฆููุง ุนูุฏ ุงูุญุงุฌุฉ)
- โ๏ธ 1 ูู 1 ููุฑุฏ ุจุฏูู ุญุณุงุจ ูุญุงุณุจู (ูุชู ุฅูุดุงุคูุง ุชููุงุฆููุง ุนูุฏ ุงูุญุงุฌุฉ)
- โ๏ธ 6 ูุงุชูุฑุฉ ุจุฏูู ููุฏ ูุญุงุณุจู ููุดูุฑ (ูุญุชุงุฌ ุฑุจุท)

## โ ุงูุฎูุงุตุฉ

**ุชู ุฅุตูุงุญ:**
- โ ุดุงุดุฉ ูุดู ุญุณุงุจ ุงูุนููู - ุงูุขู ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุดุงุดุฉ ุฃุนูุงุฑ ุงูุฏููู (ClientsAging) - ุงูุขู ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ endpoints ุฌุฏูุฏุฉ ูุญุณุงุจ ุฃุฑุตุฏุฉ ุงูุนููุงุก ูุงูููุฑุฏูู ูู ุงููููุฏ
- โ endpoint ุฌุฏูุฏ ูุญุณุงุจ ุฃุนูุงุฑ ุงูุฏููู ูู ุงููููุฏ (ููุนููุงุก ูุงูููุฑุฏูู)
- โ ุฅุตูุงุญ ุญุณุงุจ ุงูุนููุงุก ูู `getOrCreatePartnerAccount`
- โ ุฅุถุงูุฉ `journal_entry_id` ุฅูู ุฌุฏุงูู `expenses`, `supplier_invoices`, `invoices`
- โ ุฅูุดุงุก endpoint `/api/employees/:id/advance-balance` ูุญุณุงุจ ุฑุตูุฏ ุงูุณูู ูู ุงููููุฏ

**ูุญุชุงุฌ ุฅุตูุงุญ:**
- โณ ุดุงุดุฉ ุงูููุฑุฏูู (Suppliers) - ุชุญุฏูุซ ูุงุณุชุฎุฏุงู endpoints ุงูุฌุฏูุฏุฉ
- โณ ุชุญุฏูุซ `PayrollPayments.jsx` ูุงุณุชุฎุฏุงู endpoint ุงูุณูู ุงูุฌุฏูุฏ
- โณ ุฑุจุท ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ุจูููุฏ ูุญุงุณุจูุฉ ุนูุฏ ุงูุฅูุดุงุก

**ุงููุธุงู ุงูุขู:**
- โ ุฌููุน ุงูุชูุงุฑูุฑ ุงููุญุงุณุจูุฉ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฌููุน ุงูุดุงุดุงุช ุงูุฑุฆูุณูุฉ ุชุนุชูุฏ ุนูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ
- โ ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุงููุธุงู 100% ูุทุงุจู ูููุนุงููุฑ ุงููุญุงุณุจูุฉ ุงูุตุงุฑูุฉ

## ๐ ููุงุญุธุงุช

1. **ุงููููุฏ ุงูููุดูุฑุฉ ููุท**: ุฌููุน ุงูุชูุงุฑูุฑ ูุงููุดููุงุช ูุฌุจ ุฃู ุชุนุชูุฏ ุนูู `journal_entries` ูุน `status='posted'` ููุท
2. **ุงูุฑุจุท ุจุงูุญุณุงุจุงุช**: ุฌููุน ุงูุนููุงุก ูุงูููุฑุฏูู ูุฌุจ ุฃู ูููู ูุฏููู `account_id` ูุฑุชุจุท ุจุญุณุงุจ ูู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
3. **ุงูุชูุงุฒู**: ุฌููุน ุงููููุฏ ุงูููุดูุฑุฉ ูุชูุงุฒูุฉ (ุงููุฏูู = ุงูุฏุงุฆู)
4. **ุงูุฑุจุท ุจุงููููุฏ**: ูุฌุจ ุฑุจุท ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`
