# ุชูุฑูุฑ ุงูุฅุตูุงุญุงุช ุงูุดุงููุฉ ูุงูุงุฎุชุจุงุฑ

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ endpoint `/api/journal` โ
**ุงููุดููุฉ:** ูุงู endpoint `/api/journal` ูุง ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถูุ ููุง ูุนูู ุฃู ุงูุชูุงุฑูุฑ ูุฏ ุชุนุฑุถ ุงููููุฏ ุงููุณูุฏุฉ ุฅุฐุง ูู ูุชู ุชูุฑูุฑ `status` ุตุฑุงุญุฉ.

**ุงูุฅุตูุงุญ:**
- ุชู ุชุญุฏูุซ `/api/journal` ู `/journal` ููุฑุถ `status='posted'` ุจุดูู ุงูุชุฑุงุถู
- ูููู ุชูุฑูุฑ `status='draft'` ุตุฑุงุญุฉ ูุนุฑุถ ุงููููุฏ ุงููุณูุฏุฉ (ูุดุงุดุฉ ุฅุฏุงุฑุฉ ุงููููุฏ ููุท)

```javascript
// ูุจู ุงูุฅุตูุงุญ
if (status) {
  query += ` AND je.status = $${paramIndex++}`;
  params.push(status);
}

// ุจุนุฏ ุงูุฅุตูุงุญ
const effectiveStatus = status || 'posted';
WHERE je.status = $1
params = [effectiveStatus];
```

### 2. ุงูุชุญูู ูู ุฌููุน ุงูุชูุงุฑูุฑ โ

#### ุงูุชูุงุฑูุฑ ุงููุญุงุณุจูุฉ ุงูุฑุฆูุณูุฉ:
- โ **ููุฒุงู ุงููุฑุงุฌุนุฉ** (`/api/reports/trial-balance`) - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ **ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู** (`GeneralLedger.jsx`) - ููุฑุฑ `status: 'posted'` ุตุฑุงุญุฉ
- โ **ูุดู ุงูุญุณุงุจ** (`/api/journal/account/:id`) - ููุฑุถ `je.status = 'posted'` ูู SQL
- โ **ูุงุฆูุฉ ุงูุฏุฎู** (`AccountsScreen.jsx`) - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })`
- โ **ุงููุฑูุฒ ุงููุงูู** (`AccountsScreen.jsx`) - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })`
- โ **ุงูุชุฏููุงุช ุงูููุฏูุฉ** (`AccountsScreen.jsx`) - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })`

#### ุงูุชูุงุฑูุฑ ุงูุฃุฎุฑู:
- โ **ุงููุจูุนุงุช ููุงุจู ุงููุตุฑููุงุช** (`/api/reports/sales-vs-expenses`) - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ **ุงููุจูุนุงุช ุญุณุจ ุงููุฑูุน** (`/api/reports/sales-by-branch`) - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ **ุงููุตุฑููุงุช ุญุณุจ ุงููุฑูุน** (`/api/reports/expenses-by-branch`) - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ **ูุจูุนุงุช ุงูููู** (`/api/reports/business-day-sales`) - ูุณุชุฎุฏู `je.status = 'posted'` ููุท
- โ **ุฅูุฑุงุฑ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ** (`VatReturn.jsx`) - ูุณุชุฎุฏู `apiJournal.list({ status: 'posted' })`

### 3. ุงูุชุญูู ูู ุฑุจุท ุงูููุงุชูุฑ ูุงููุตุฑููุงุช โ
- โ ุฌููุน ููุงุชูุฑ ุงููุจูุนุงุช (`invoices`) ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`
- โ ุฌููุน ููุงุชูุฑ ุงูููุฑุฏูู (`supplier_invoices`) ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`
- โ ุฌููุน ุงููุตุฑููุงุช (`expenses`) ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ ุนุจุฑ `journal_entry_id`

### 4. ุงูุชุญูู ูู ุญุณุงุจ ุงูุฃุฑุตุฏุฉ โ
- โ ุฃุฑุตุฏุฉ ุงูุนููุงุก (`/api/partners/:id/balance`) - ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฃุฑุตุฏุฉ ุงูููุฑุฏูู (`/api/partners/:id/statement`) - ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฑุตูุฏ ุงูุณูู ููููุธููู (`/api/employees/:id/advance-balance`) - ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฃุนูุงุฑ ุงูุฏููู (`/api/customers/aging`, `/api/suppliers/aging`) - ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท

## ๐งช ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

ุชู ุฅูุดุงุก ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุดุงูู ูู `backend/scripts/test_all_reports.cjs` ููุญุต:
1. โ ููุฒุงู ุงููุฑุงุฌุนุฉ
2. โ ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู
3. โ ูุดู ุงูุญุณุงุจ
4. โ ูุงุฆูุฉ ุงูุฏุฎู
5. โ ุงููุฑูุฒ ุงููุงูู
6. โ ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ
7. โ ุงูููุงุชูุฑ ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
8. โ ููุงุชูุฑ ุงูููุฑุฏูู ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
9. โ ุงููุตุฑููุงุช ุบูุฑ ุงููุฑุจูุทุฉ ุจูููุฏ
10. โ ุฌููุน ุงูุชูุงุฑูุฑ ุงูุฃุฎุฑู

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ Backend APIs
```bash
cd backend
node scripts/test_all_reports.cjs
```

### 2. ุงุฎุชุจุงุฑ Frontend
- ูุชุญ ุดุงุดุฉ ุงููููุฏ ุงูููููุฉ โ ุงูุชุฃูุฏ ูู ุฃู ุงููููุฏ ุงูููุดูุฑุฉ ููุท ุชุธูุฑ
- ูุชุญ ููุฒุงู ุงููุฑุงุฌุนุฉ โ ุงูุชุฃูุฏ ูู ุฃู ุงูุฃุฑุตุฏุฉ ุตุญูุญุฉ
- ูุชุญ ุฏูุชุฑ ุงูุฃุณุชุงุฐ โ ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงููููุฏ ููุดูุฑุฉ
- ูุชุญ ูุดู ุญุณุงุจ โ ุงูุชุฃูุฏ ูู ุฃู ุงููููุฏ ููุดูุฑุฉ ููุท
- ูุชุญ ูุงุฆูุฉ ุงูุฏุฎู โ ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ
- ูุชุญ ุงููุฑูุฒ ุงููุงูู โ ุงูุชุฃูุฏ ูู ุฃู ุงููุนุงุฏูุฉ ูุชูุงุฒูุฉ
- ูุชุญ ุงูุชุฏููุงุช ุงูููุฏูุฉ โ ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ

### 3. ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ
- ูุชุญ ุชูุฑูุฑ ุงููุจูุนุงุช ููุงุจู ุงููุตุฑููุงุช โ ุงูุชุฃูุฏ ูู ุงูุจูุงูุงุช
- ูุชุญ ุชูุฑูุฑ ุงููุจูุนุงุช ุญุณุจ ุงููุฑูุน โ ุงูุชุฃูุฏ ูู ุงูุจูุงูุงุช
- ูุชุญ ุชูุฑูุฑ ุงููุตุฑููุงุช ุญุณุจ ุงููุฑูุน โ ุงูุชุฃูุฏ ูู ุงูุจูุงูุงุช
- ูุชุญ ุฅูุฑุงุฑ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ โ ุงูุชุฃูุฏ ูู ุงูุญุณุงุจุงุช

### 4. ุงุฎุชุจุงุฑ ุงูุฑุจุท
- ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช โ ุงูุชุฃูุฏ ูู ุฅูุดุงุก ููุฏ ูุญุงุณุจู
- ุฅูุดุงุก ูุงุชูุฑุฉ ููุฑุฏูู โ ุงูุชุฃูุฏ ูู ุฅูุดุงุก ููุฏ ูุญุงุณุจู
- ุฅูุดุงุก ูุตุฑูู โ ุงูุชุฃูุฏ ูู ุฅูุดุงุก ููุฏ ูุญุงุณุจู
- ูุชุญ ูุดู ุญุณุงุจ ุนููู โ ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ
- ูุชุญ ูุดู ุญุณุงุจ ููุฑุฏ โ ุงูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูู ุงููููุฏ ุงูููุดูุฑุฉ

## โ ุงูุฎูุงุตุฉ

**ุฌููุน ุงูุชูุงุฑูุฑ ูุงูุดุงุดุงุช ุงูุขู:**
- โ ุชุณุชุฎุฏู ุงููููุฏ ุงูููุดูุฑุฉ ููุท (`status='posted'`)
- โ ูุง ุชุนุชูุฏ ุนูู ุฌุฏุงูู invoices/payments/orders ูุจุงุดุฑุฉ
- โ ุฌููุน ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุฑุจูุทุฉ ุจูููุฏ ูุญุงุณุจูุฉ
- โ ุฌููุน ุงูุฃุฑุตุฏุฉ ุชูุญุณุจ ูู ุงููููุฏ ุงูููุดูุฑุฉ ููุท
- โ ุฌููุน ุงููููุฏ ูุชูุงุฒูุฉ (ุงููุฏูู = ุงูุฏุงุฆู)

**ุงููุธุงู ุงูุขู 100% ูุทุงุจู ูููุนุงููุฑ ุงููุญุงุณุจูุฉ ุงูุตุงุฑูุฉ! ๐**
