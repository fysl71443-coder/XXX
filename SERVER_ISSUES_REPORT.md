# ุชูุฑูุฑ ุงููุดุงูู ูู ุงูุฎุงุฏู

## โ ุงูุฎุงุฏู ูุนูู

**ุงููููุฐ:** `4000` (ูููุณ 10000 ููุง ูู ูุชููุน)
- **URL:** `http://localhost:4000`
- **API Base:** `http://localhost:4000/api`

**ููุงุญุธุฉ:** ูุจุฏู ุฃู `process.env.PORT` ูุญุฏุฏ ูู ููู `.env` ุจูููุฉ 4000

---

## โ ุงููุดุงูู ุงูููุฌูุฏุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชุตูุฉ

**ุงูุฎุทุฃ:**
```
[SERVER] Database: NOT configured
```

**ุงูุณุจุจ:** ูุชุบูุฑ `pool` ูู `db.js` ุบูุฑ ููุนุฏ ุจุดูู ุตุญูุญ ุฃู `DATABASE_URL` ุบูุฑ ููุฌูุฏ/ุบูุฑ ุตุญูุญ ูู `.env`

**ุงูุชุฃุซูุฑ:**
- โ ุฌููุน ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณุชูุดู
- โ ุฅูุดุงุก/ุชุญุฏูุซ/ูุฑุงุกุฉ ุงููุณูุฏุงุช ูู ุชุนูู
- โ ูุง ูููู ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช

**ุงูุญู:**
- โ ุงูุชุญูู ูู ูุฌูุฏ `DATABASE_URL` ูู ููู `.env`
- โ ุงูุชุญูู ูู ุตุญุฉ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุชุฃูุฏ ูู ุฃู `pool` ูุชู ุฅูุดุงุคู ุจุดูู ุตุญูุญ ูู `db.js`

---

### 2. ุฎุทุฃ ูู Schema: expenses table

**ุงูุฎุทุฃ:**
```
[SCHEMA] Error adding columns to expenses: Cannot read properties of null (reading 'query')
```

**ุงููููุน:** `backend/server.js` - ุงูุณุทูุฑ 487-526 (ุฅุถุงูุฉ ุฃุนูุฏุฉ expenses)

**ุงูุณุจุจ:** 
- `pool` ูู `null` ุนูุฏ ูุญุงููุฉ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ
- ุงูููุฏ ูุญุงูู ุงุณุชุฏุนุงุก `pool.query()` ุจูููุง `pool` ุบูุฑ ููุนุฏ

**ุงูููุฏ ุงููุดููู ููู:**
```javascript
// ุญูู ุงูุณุทุฑ 487
const { rows: dateCheck } = await pool.query(`...`) // pool ูู null!
```

**ุงูุญู:**
- โ ุฅุถุงูุฉ ูุญุต `if (!pool) return;` ูุจู ุงุณุชุฎุฏุงู `pool.query()`
- โ ุฃู ุฅุตูุงุญ ูุดููุฉ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃููุงู

---

## ๐ ููุฎุต ุงูุญุงูุฉ

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ุงูุชูุงุตูู |
|--------|--------|----------|
| ุงูุฎุงุฏู | โ ูุนูู | ุนูู ุงููููุฐ 4000 |
| ูุงุนุฏุฉ ุงูุจูุงูุงุช | โ ุบูุฑ ูุชุตูุฉ | `pool` ุบูุฑ ููุนุฏ |
| Schema Setup | โ ูุดู | `expenses` table columns |
| ุงูุงุฎุชุจุงุฑุงุช | โ ูุง ุชุนูู | ุชุญุชุงุฌ ูุงุนุฏุฉ ุจูุงูุงุช |

---

## ๐ง ุงูุญููู ุงููุทููุจุฉ

### ุงูุญู 1: ุงูุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ูุชุญ ููู `backend/.env`
2. ุงูุชุญูู ูู ูุฌูุฏ `DATABASE_URL`:
   ```
   DATABASE_URL=postgresql://user:password@host:port/database
   ```
3. ุงูุชุญูู ูู ุตุญุฉ ุงูุฅุนุฏุงุฏุงุช

### ุงูุญู 2: ุฅุตูุงุญ ููุฏ Schema

ูู `backend/server.js` ุญูู ุงูุณุทุฑ 487ุ ุฃุถู ูุญุต:

```javascript
// ูุจู ุงูุณุทุฑ 487
if (!pool) {
  console.warn('[SCHEMA] Database pool not configured, skipping expenses columns setup');
  return;
}

// ุซู ุงูููุฏ ุงูููุฌูุฏ ุญุงููุงู
const { rows: dateCheck } = await pool.query(`...`);
```

### ุงูุญู 3: ุชุญุฏูุซ ููู ุงูุงุฎุชุจุงุฑ

ุชุญุฏูุซ `test_draft_calculations.js` ูุงุณุชุฎุฏุงู ุงููููุฐ 4000:

```javascript
const BASE_URL = process.env.API_URL || 'http://localhost:4000';
```

---

## ๐ ุจุนุฏ ุงูุฅุตูุงุญ

1. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู**
2. **ุงูุชุญูู ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ:**
   ```
   [SERVER] Database: connected
   ```
3. **ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช:**
   ```bash
   node test_draft_calculations.js
   ```

---

## ๐ ุชูุงุตูู ุงูุฎุงุฏู

- **ุงููููุฐ:** 4000 (ูู `process.env.PORT`)
- **ุงูุจูุฆุฉ:** development
- **JWT_SECRET:** โ configured
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช:** โ NOT configured
- **Build Path:** `backend/frontend/build`

---

**ุชุงุฑูุฎ ุงูุชุญููู:** 2025-01-16
**ุงูุญุงูุฉ:** โ๏ธ ูุญุชุงุฌ ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
